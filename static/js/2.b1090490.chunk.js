/*! For license information please see 2.b1090490.chunk.js.LICENSE.txt */
(this["webpackJsonpTorches-web-app"]=this["webpackJsonpTorches-web-app"]||[]).push([[2],{1188:function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return o}));r(16);var n=function(e,t){return isNaN(e)||null===e?"0":("number"===typeof e?e:e.toNumber()).toLocaleString("en-US",{maximumFractionDigits:null!==t&&void 0!==t?t:20})},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=new RegExp("^(\\d)+(\\.(\\d){1,"+t+"})?$");return r.test(e)?e:e.toFixed(t)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:18;return new RegExp("^\\d*(\\.\\d{0,"+e+"})?$")}},1232:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var n=r(2),a=r(23),o=r(57),i=r(5),c=r(16),s=r(120),u=r(9),l=r(27),h=r(33);function p(){p=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(E){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),i=new B(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return _()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var c=b(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function h(){}function d(){}function f(){}var m={};c(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&r.call(g,a)&&(m=g);var v=f.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){var n;this._invoke=function(a,o){function i(){return new t((function(n,i){!function n(a,o,i,c){var s=u(e[a],e,o);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(h).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}(a,o,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return d.prototype=f,c(v,"constructor",f),c(f,"constructor",d),d.displayName=c(f,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(k.prototype),c(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new k(s(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(v),c(v,i,"Generator"),c(v,a,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=T,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}var d={lastUpdate:null,multiCaller:null,networkType:"",web3:null,account:"",fildaContract:null,totalFildaSupply:h.a.ONE,mveBalance:h.a.zero,totalVeFildaSupply:h.a.zero,currentVotePowerSum:0,currentVotingVeTokenSum:h.a.zero,nextVotingVeTokenSum:h.a.zero,nextEpochRewardRate:0,init:function(){var e=Object(i.a)(p().mark((function e(t,r,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.networkType=t,this.web3=r,this.account=n,this.fildaContract=null,this.escrowContract=null,this.fildaPrice=-1,this.currentEpochTime=0,this.nextEpochTime=0,this.currentRewardRate=0,this.nextEpochRewardRate=0,this.previousEpoch=0,this.someData={},this.currentVotePowerSum=0,this.currentVotingVeTokenSum=h.a.zero,this.nextVotingVeTokenSum=h.a.zero,this.multiCaller=s.a.multiCaller(this.networkType,this.web3),this.lastUpdate=new Date;case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),getNextEpochTime:function(){if(this.currentEpochTime<=0||!this.epochDuration||this.epochDuration.eq(0))return this.currentEpochTime;var e=this.epochDuration.toNumber();return this.nextEpochTime=this.currentEpochTime+e,this.someData.nextEpochTime=this.nextEpochTime,this.nextEpochTime},requestCurrentEpochTime:function(){var e=Object(i.a)(p().mark((function e(){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].rewardPolicyMaker.ABI);case 2:return t=e.sent,r=new this.web3.eth.Contract(t,u.a.veToken[this.networkType].rewardPolicyMaker.address),e.t0=Number,e.next=7,r.methods.epoch_start_time(this.currentEpoch.toFixed()).call();case 7:return e.t1=e.sent,this.currentEpochTime=(0,e.t0)(e.t1),e.t2=c.BigNumber,e.next=12,r.methods.rate_at(this.currentEpochTime).call();case 12:return e.t3=e.sent,this.currentRewardRate=(0,e.t2)(e.t3),e.t4=c.BigNumber,e.next=17,r.methods.rate_at(this.getNextEpochTime()).call();case 17:e.t5=e.sent,this.nextEpochRewardRate=(0,e.t4)(e.t5);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getFildaPrice:function(){var e=Object(i.a)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==this.fildaPrice){e.next=4;break}return e.next=3,s.a.getFildaPrice(this.web3,this.networkType);case 3:this.fildaPrice=e.sent;case 4:return e.abrupt("return",this.fildaPrice);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getGaugeData:function(){var e=Object(i.a)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object.values(u.a.veToken[this.networkType].gauge.vault),e.t0=this,e.t1=this,e.t2=this,e.next=6,this.generateCalls(t);case 6:return e.t3=e.sent,e.next=9,e.t2.call.call(e.t2,e.t3);case 9:return e.t4=e.sent,e.t5=e.t1.parseResult.call(e.t1,e.t4),e.next=13,e.t0.computeForGauge.call(e.t0,e.t5);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),generateCallsStep2:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,i,c,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].gaugeController.ABI);case 2:return r=e.sent,e.next=5,h.a.loadABI(u.a.veToken[this.networkType].gauge.ABI);case 5:n=e.sent,a=[],i=Object(o.a)(t);try{for(i.s();!(c=i.n()).done;)s=c.value,a.push({reference:"gaugeController_"+s.symbol,contractAddress:u.a.veToken[this.networkType].gaugeController.address,abi:r,calls:[{reference:"get_gauge_weight_"+s.symbol,methodName:"get_gauge_weight",methodParameters:[s.address]},{reference:"gauge_relative_weight_currentEpochTime_"+s.symbol,methodName:"gauge_relative_weight",methodParameters:[s.address,this.currentEpochTime]},{reference:"gauge_relative_weight_nextEpochTime_"+s.symbol,methodName:"gauge_relative_weight",methodParameters:[s.address,this.nextEpochTime]},{reference:"vote_user_slopes_"+s.symbol,methodName:"vote_user_slopes",methodParameters:[this.account,s.address]},{reference:"points_weight_current_"+s.symbol,methodName:"points_weight",methodParameters:[s.address,this.currentEpochTime]},{reference:"points_weight_next_"+s.symbol,methodName:"points_weight",methodParameters:[s.address,this.nextEpochTime]}],context:{symbol:s.symbol}}),a.push({reference:"gauge_"+s.symbol,contractAddress:s.address,abi:n,calls:Array.from({length:s.reward_token_length.toNumber()},(function(e,t){return{reference:"reward_tokens_"+t,methodName:"reward_tokens",methodParameters:[t]}})),context:{symbol:s.symbol}})}catch(l){i.e(l)}finally{i.f()}return e.abrupt("return",{calls:a,gaugeData:t});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),generateCalls:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,i,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=[],a=Object(o.a)(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=23;break}return c=i.value,e.t0=r,e.t1="gauge_"+c.symbol,e.t2=c.address,e.next=12,h.a.loadABI(u.a.veToken[this.networkType].gauge.ABI);case 12:e.t3=e.sent,e.t4=[{reference:"workingSupply",methodName:"working_supply"},{reference:"rawBalance",methodName:"balanceOf",methodParameters:[this.account]},{reference:"workingBalances",methodName:"working_balances",methodParameters:[this.account]},{reference:"claimable_tokens",methodName:"claimable_tokens",methodParameters:[this.account]},{reference:"reward_token_length",methodName:"reward_token_length"}],e.t5={symbol:c.symbol},e.t6={reference:e.t1,contractAddress:e.t2,abi:e.t3,calls:e.t4,context:e.t5},e.t0.push.call(e.t0,e.t6),r.push({reference:"underlying_"+c.symbol,contractAddress:c.underlying.address,abi:c.underlying.ABI,calls:[{reference:"balanceOf",methodName:"balanceOf",methodParameters:[c.address]}],context:{symbol:c.symbol}}),r.push({reference:"lpToken_"+c.symbol,contractAddress:c.lpToken.address,abi:c.lpToken.ABI,calls:[{reference:"balanceOf",methodName:"balanceOf",methodParameters:[c.address]},{reference:"balanceOf_Me",methodName:"balanceOf",methodParameters:[this.account]},{reference:"exchangeRateStored",methodName:"exchangeRateStored"}],context:{symbol:c.symbol}}),r.push({reference:"priceOracle_"+c.symbol,contractAddress:u.a.priceOracle.network[this.networkType].address,abi:u.a.priceOracle.ABI,calls:[{reference:"getUnderlyingPrice",methodName:"getUnderlyingPrice",methodParameters:[c.lpToken.address]}],context:{symbol:c.symbol}}),n.push({reference:c.symbol,methodName:"claimable_reward",methodParameters:[this.account,c.address]});case 21:e.next=5;break;case 23:e.next=28;break;case 25:e.prev=25,e.t7=e.catch(3),a.e(e.t7);case 28:return e.prev=28,a.f(),e.finish(28);case 31:return e.t8=r,e.t9=u.a.veToken[this.networkType].rewardPolicyMaker.address,e.next=35,h.a.loadABI(u.a.veToken[this.networkType].rewardPolicyMaker.ABI);case 35:return e.t10=e.sent,e.t11=[{reference:"current_epoch",methodName:"current_epoch"},{reference:"epoch_length",methodName:"epoch_length"}],e.t12={reference:"rewardPolicyMaker",contractAddress:e.t9,abi:e.t10,calls:e.t11},e.t8.push.call(e.t8,e.t12),e.t13=r,e.t14=u.a.veToken[this.networkType].voting_escrow.address,e.next=43,h.a.loadABI(u.a.veToken[this.networkType].voting_escrow.ABI);case 43:return e.t15=e.sent,e.t16=[{reference:"balanceOf",methodName:"balanceOf",methodParameters:[this.account]},{reference:"locked",methodName:"locked",methodParameters:[this.account]},{reference:"totalSupply",methodName:"totalSupply"},{reference:"supply",methodName:"supply"}],e.t17={reference:"voting_escrow",contractAddress:e.t14,abi:e.t15,calls:e.t16},e.t13.push.call(e.t13,e.t17),e.t18=r,e.t19=u.a.COMP.network[this.networkType].address,e.next=51,h.a.loadABI("/abis/ERC20.json");case 51:return e.t20=e.sent,e.t21=[{reference:"totalSupply",methodName:"totalSupply"},{reference:"mveBalanceOf",methodName:"balanceOf",methodParameters:[u.a.veToken[this.networkType].voting_escrow.address]}],e.t22={reference:"filda",contractAddress:e.t19,abi:e.t20,calls:e.t21},e.t18.push.call(e.t18,e.t22),e.abrupt("return",{calls:r,gaugeData:t});case 56:case"end":return e.stop()}}),e,this,[[3,25,28,31]])})));return function(t){return e.apply(this,arguments)}}(),call:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.calls,n=t.gaugeData,e.next=3,this.multiCaller.call(r);case 3:return a=e.sent,e.abrupt("return",{results:a,gaugeData:n});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),parseResultStep2:function(e){var t,r=e.results,n=e.gaugeData,a=Object.values(r.results),i=a.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("gaugeController_")})),c=a.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("gauge_")})),u=Object(o.a)(n);try{var l=function(){var e=t.value,r=i.find((function(t){return t.originalContractCallContext.context.symbol===e.symbol})).callsReturnContext;e.gaugeController={};var n,a=Object(o.a)(r);try{for(a.s();!(n=a.n()).done;){var u=n.value;e.gaugeController[u.reference]=s.a.pickFromMultiCallResults(u.methodName,r,u.reference)}}catch(d){a.e(d)}finally{a.f()}r=c.find((function(t){return t.originalContractCallContext.context.symbol===e.symbol})).callsReturnContext,e.rewardTokens=[];var l,h=Object(o.a)(r);try{for(h.s();!(l=h.n()).done;){var p=l.value;e.rewardTokens.push({address:s.a.pickFromMultiCallResults(p.methodName,r,p.reference)})}}catch(d){h.e(d)}finally{h.f()}};for(u.s();!(t=u.n()).done;)l()}catch(h){u.e(h)}finally{u.f()}return n},parseResult:function(e){var t=e.results,r=e.gaugeData,n=Object.values(t.results),a=n.filter((function(e){return"rewardPolicyMaker"===e.originalContractCallContext.reference}))[0];this.currentEpoch=s.a.pickFromMultiCallResults("current_epoch",a.callsReturnContext,"current_epoch"),this.epochDuration=s.a.pickFromMultiCallResults("epoch_length",a.callsReturnContext,"epoch_length"),this.someData.epochDuration=this.epochDuration;var i=n.filter((function(e){return"voting_escrow"===e.originalContractCallContext.reference}))[0];this.totalSupply=s.a.pickFromMultiCallResults("totalSupply",i.callsReturnContext),this.someData.mveFilDALocked=s.a.pickFromMultiCallResults("supply",i.callsReturnContext),this.someData.veFildaTotal=this.totalSupply,this.veTokenBalance=s.a.pickFromMultiCallResults("balanceOf",i.callsReturnContext),this.someData.veFilDABalance=this.veTokenBalance;var c=s.a.pickFromMultiCallResults("locked",i.callsReturnContext);this.locked={amount:c[0],end:c[1].toNumber()};var u=n.filter((function(e){return"filda"===e.originalContractCallContext.reference}))[0];this.totalFildaSupply=s.a.pickFromMultiCallResults("totalSupply",u.callsReturnContext,"totalSupply"),this.mveBalance=s.a.pickFromMultiCallResults("balanceOf",u.callsReturnContext,"mveBalanceOf");var l,h=n.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("gauge_")})),p=n.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("underlying_")})),d=n.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("lpToken_")})),f=n.filter((function(e){return 0===e.originalContractCallContext.reference.indexOf("priceOracle_")})),m=Object(o.a)(r);try{var y=function(){var e,t=l.value,r=h.find((function(e){return e.originalContractCallContext.context.symbol===t.symbol})),n=p.find((function(e){return e.originalContractCallContext.context.symbol===t.symbol})),a=d.find((function(e){return e.originalContractCallContext.context.symbol===t.symbol})),i=f.find((function(e){return e.originalContractCallContext.context.symbol===t.symbol})),c=r.callsReturnContext,u=Object(o.a)(c);try{for(u.s();!(e=u.n()).done;){var m=e.value;t[m.reference]=s.a.pickFromMultiCallResults(m.methodName,c,m.reference)}}catch(T){u.e(T)}finally{u.f()}c=n.callsReturnContext;var y,g=Object(o.a)(c);try{for(g.s();!(y=g.n()).done;){var v=y.value;t.underlying[v.methodName]=s.a.pickFromMultiCallResults(v.methodName,c,v.reference)}}catch(T){g.e(T)}finally{g.f()}c=a.callsReturnContext;var w,k=Object(o.a)(c);try{for(k.s();!(w=k.n()).done;){var b=w.value;t.lpToken[b.reference]=s.a.pickFromMultiCallResults(b.methodName,c,b.reference)}}catch(T){k.e(T)}finally{k.f()}c=i.callsReturnContext;var x,C=Object(o.a)(c);try{for(C.s();!(x=C.n()).done;){var B=x.value;t.lpToken.underlyingPrice=s.a.pickFromMultiCallResults(B.methodName,c,B.reference),t.lpToken.price=t.lpToken.underlyingPrice.shiftedBy(-(36-t.underlying.decimals))}}catch(T){C.e(T)}finally{C.f()}};for(m.s();!(l=m.n()).done;)y()}catch(g){m.e(g)}finally{m.f()}return r},isExceeded:function(){return!(this.locked&&this.locked.end>(new Date).getTime()/1e3)},isLocked:function(){return this.locked&&this.locked.amount.gt(0)},getCurrentLockUntil:function(){if(this.locked)return new Date(1e3*this.locked.end)},getCurrentLockedAmount:function(){return this.locked?this.locked.amount:h.a.zero},computeForGauge:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch==this.previousEpoch){e.next=4;break}return this.previousEpoch=this.currentEpoch,e.next=4,this.requestCurrentEpochTime();case 4:return e.t0=this,e.t1=this,e.next=8,this.generateCallsStep2(t);case 8:return e.t2=e.sent,e.next=11,e.t1.call.call(e.t1,e.t2);case 11:e.t3=e.sent,e.t0.parseResultStep2.call(e.t0,e.t3),r=Object(o.a)(t),e.prev=14,r.s();case 16:if((n=r.n()).done){e.next=48;break}return(a=n.value).lpToken.totalBalance=a.lpToken.balanceOf.shiftedBy(-a.underlying.decimals).multipliedBy(a.lpToken.exchangeRateStored.shiftedBy(-18)),a.gaugeController.voteUserSlopesPower=a.gaugeController["vote_user_slopes_"+a.symbol][1].dividedBy(100).toNumber(),this.currentVotePowerSum+=a.gaugeController.voteUserSlopesPower,a.gaugeController.voteUserSlopesEnd=new Date(1e3*a.gaugeController["vote_user_slopes_"+a.symbol][2].toNumber()),a.gaugeController.atCurrentEpoch=a.gaugeController.voteUserSlopesEnd<this.nextEpochTime,a.gaugeController.currentPointsWeight=a.gaugeController["points_weight_current_"+a.symbol][0],this.currentVotingVeTokenSum=this.currentVotingVeTokenSum.plus(a.gaugeController.currentPointsWeight),a.gaugeController.nextPointsWeight=a.gaugeController["points_weight_next_"+a.symbol][0],this.nextVotingVeTokenSum=this.nextVotingVeTokenSum.plus(a.gaugeController.nextPointsWeight),a.gaugeController.weight=a.gaugeController["get_gauge_weight_"+a.symbol].shiftedBy(-18),a.lpToken.myBalance=a.lpToken.balanceOf_Me.shiftedBy(-a.underlying.decimals).multipliedBy(a.lpToken.exchangeRateStored.shiftedBy(-18)),a.currentEpochRelativeWeight=a.gaugeController["gauge_relative_weight_currentEpochTime_"+a.symbol].multipliedBy(100).shiftedBy(-18),a.nextEpochRelativeWeight=a.gaugeController["gauge_relative_weight_nextEpochTime_"+a.symbol].multipliedBy(100).shiftedBy(-18),e.next=33,this.computerNextEpochGaugeApr(a);case 33:return a.nextEpochGaugeApr=e.sent,a.balance=a.rawBalance.shiftedBy(-a.underlying.decimals).multipliedBy(a.lpToken.exchangeRateStored.shiftedBy(-18)),a.totalStakeBalance=a.lpToken.totalBalance,a.boost=this.userBoost(a,this.veTokenBalance,this.totalSupply),a.remainingBalance=this.computerUserRemainingStake(a),e.next=40,this.computerGaugeApr(a);case 40:return a.APR=e.sent,e.next=43,this.computerMyApr(a);case 43:i=e.sent,a.apr=i[0],a.nextEpochApr=i[1];case 46:e.next=16;break;case 48:e.next=53;break;case 50:e.prev=50,e.t4=e.catch(14),r.e(e.t4);case 53:return e.prev=53,r.f(),e.finish(53);case 56:case"end":return e.stop()}}),e,this,[[14,50,53,56]])})));return function(t){return e.apply(this,arguments)}}(),getFildaContract:function(){var e=Object(i.a)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fildaContract){e.next=5;break}return e.next=3,h.a.loadABI("/abis/ERC20.json");case 3:t=e.sent,this.fildaContract=new this.web3.eth.Contract(t,u.a.COMP.network[this.networkType].address);case 5:return e.abrupt("return",this.fildaContract);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getEscrowContract:function(){var e=Object(i.a)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.escrowContract){e.next=5;break}return e.next=3,h.a.loadABI("/abis/voting_escrow.json");case 3:t=e.sent,this.escrowContract=new this.web3.eth.Contract(t,u.a.veToken[this.networkType].voting_escrow.address);case 5:return e.abrupt("return",this.escrowContract);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getFildaBalance:function(){var e=Object(i.a)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c.BigNumber,e.next=3,this.getFildaContract();case 3:return e.next=5,e.sent.methods.balanceOf(this.account).call();case 5:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getAllowanceByEscrow:function(){var e=Object(i.a)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c.BigNumber,e.next=3,this.getFildaContract();case 3:return e.next=5,e.sent.methods.allowance(this.account,u.a.veToken[this.networkType].voting_escrow.address).call();case 5:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),lock:function(){var e=Object(i.a)(p().mark((function e(t,r,n,a,o){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getEscrowContract();case 3:return e.t1=e.sent.methods.create_lock,e.t2=[t,r],e.t3=n,e.t4=a,e.t5={gas:u.a.veToken[this.networkType].gasLimit.max},e.t6=o,e.abrupt("return",e.t0.runContractMethod.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),increaseAmount:function(){var e=Object(i.a)(p().mark((function e(t,r,n,a){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getEscrowContract();case 3:return e.t1=e.sent.methods.increase_amount,e.t2=[t],e.t3=r,e.t4=n,e.t5=a,e.abrupt("return",e.t0.runContractMethod.call(e.t0,e.t1,e.t2,e.t3,e.t4,null,e.t5));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),increaseLock:function(){var e=Object(i.a)(p().mark((function e(t,r,n,a){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getEscrowContract();case 3:return e.t1=e.sent.methods.increase_unlock_time,e.t2=[t],e.t3=r,e.t4=n,e.t5={gas:u.a.veToken[this.networkType].gasLimit.max},e.t6=a,e.abrupt("return",e.t0.runContractMethod.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5,e.t6));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),unlock:function(){var e=Object(i.a)(p().mark((function e(t,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this.getEscrowContract();case 3:return e.t1=e.sent.methods.withdraw,e.t2=[],e.t3=t,e.t4=r,e.t5={gas:u.a.veToken[this.networkType].gasLimit.max},e.abrupt("return",e.t0.runContractMethod.call(e.t0,e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),approveFilda:function(){var e=Object(i.a)(p().mark((function e(t,r,n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(u.a.veToken[this.networkType].voting_escrow.address,h.a.max),e.t0=this,e.next=4,this.getFildaContract();case 4:return e.t1=e.sent.methods.approve,e.t2=[u.a.veToken[this.networkType].voting_escrow.address,h.a.max],e.t3=t,e.t4=r,e.t5=n,e.abrupt("return",e.t0.runContractMethod.call(e.t0,e.t1,e.t2,e.t3,e.t4,null,e.t5));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),vote:function(){var e=Object(i.a)(p().mark((function e(t,r,n,a,o){var i,c,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.a.veToken[this.networkType].gaugeController,e.next=3,h.a.loadABI(i.ABI);case 3:return c=e.sent,s=new this.web3.eth.Contract(c,i.address),e.abrupt("return",this.runContractMethod(s.methods.vote_for_gauge_weights,[t.address,100*r],n,a,{gas:u.a.veToken[this.networkType].gasLimit.max},o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),claim:function(){var e=Object(i.a)(p().mark((function e(t,r,n){var a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].gauge.ABI);case 2:return a=e.sent,o=new this.web3.eth.Contract(a,t.address),e.abrupt("return",this.runContractMethod(o.methods.claim_rewards,[],r,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),runContractMethod:function(e,t,r,o,i,c){return e.apply(void 0,Object(a.a)(t)).send(Object(n.a)({from:this.account},i)).on("transactionHash",(function(e){if(c)return c(e)})).on("confirmation",(function(e,t){})).on("receipt",(function(e){if(r)return r(e)})).on("error",(function(e,t){if(o)return o(e,t)}))},computerGaugeApr:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,o,i,s,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFildaPrice();case 2:return r=e.sent,n=this.currentRewardRate.multipliedBy(365).multipliedBy(24).multipliedBy(3600).multipliedBy(r).shiftedBy(-18),a=n.multipliedBy(t.currentEpochRelativeWeight).dividedBy(100),o=new c.BigNumber(1e4),i=t.workingSupply.shiftedBy(-t.underlying.decimals).multipliedBy(t.lpToken.exchangeRateStored.shiftedBy(-18)),s=o.dividedBy(i.plus(o)),u=a.multipliedBy(s).multipliedBy(100).dividedBy(o.multipliedBy(t.lpToken.price)),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),computerMyApr:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,o,i,c,s,u,l,h,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.balance.multipliedBy(t.lpToken.price)).gt(0)){e.next=17;break}return e.next=4,this.getFildaPrice();case 4:return n=e.sent,a=this.currentRewardRate.multipliedBy(365).multipliedBy(24).multipliedBy(3600).multipliedBy(n).shiftedBy(-18),o=a.multipliedBy(t.currentEpochRelativeWeight).dividedBy(100),i=this.userAppliedLiquidityShare(t),c=o.multipliedBy(i),s=c.multipliedBy(100).dividedBy(r),u=this.nextEpochRewardRate.multipliedBy(365).multipliedBy(24).multipliedBy(3600).multipliedBy(n).shiftedBy(-18),l=u.multipliedBy(t.nextEpochRelativeWeight).dividedBy(100),h=l.multipliedBy(i),d=h.multipliedBy(100).dividedBy(r),e.abrupt("return",[s.toNumber(),d.toNumber()]);case 17:return e.abrupt("return",[0,0]);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),computerNextEpochGaugeApr:function(){var e=Object(i.a)(p().mark((function e(t){var r,n,a,o,i,s,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFildaPrice();case 2:return r=e.sent,n=this.nextEpochRewardRate.multipliedBy(365).multipliedBy(24).multipliedBy(3600).multipliedBy(r).shiftedBy(-18),a=n.multipliedBy(t.nextEpochRelativeWeight).dividedBy(100),o=new c.BigNumber(1e4),i=t.workingSupply.shiftedBy(-t.underlying.decimals).multipliedBy(t.lpToken.exchangeRateStored.shiftedBy(-18)),s=o.dividedBy(i.plus(o)),u=a.multipliedBy(s).multipliedBy(100).dividedBy(o.multipliedBy(t.lpToken.price)),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),computerUserRemainingStake:function(e){return this.userRemainingStake(e.balance,e.totalStakeBalance,this.veTokenBalance,this.totalSupply,e.boost)},userRemainingStake:function(e,t,r,n,a){var o=t*r/n;if(e>o)return 0;if((isNaN(a)||0===a)&&0===e)return o;var i=.4*a-e;return 0===i?0:o/i},userBoost:function(e,t,r){if(e.totalStakeBalance.eq(0))return 0;var n=this.userLiquidityShare(e,e.balance,e.totalStakeBalance,t,r),a=this.userLiquidityShare(e,e.balance,e.totalStakeBalance,0,r),o=Math.min(n/a,2.5);return isNaN(o)&&(o=0),o},userBoostForEstimation:function(e,t,r,n){return e?Math.min(this.userLiquidityShareForEstimation(e,t,r,n.toNumber())/this.userLiquidityShareForEstimation(e,t,0,n.toNumber()),2.5):0},userLiquidityShareForEstimation:function(e,t,r,n){var a=Math.min(.4*t+.6*(e.totalStakeBalance+t)*r/(n+r),t);return 100*a/(e.workingSupply.shiftedBy(-e.underlying.decimals).multipliedBy(e.lpToken.exchangeRateStored.shiftedBy(-18)).toNumber()+a)},userLiquidityShare:function(e,t,r,n,a){return c.BigNumber.minimum(t.multipliedBy(.4).plus(r.multipliedBy(.6).multipliedBy(n).dividedBy(a)),t).multipliedBy(100).dividedBy(r)},userAppliedBoost:function(e){return e.rawBalance.eq(0)?h.a.zero:e.workingBalances.multipliedBy(2.5).dividedBy(e.rawBalance)},userAppliedLiquidityShare:function(e){return e.workingSupply.eq(0)?h.a.zero:e.workingBalances.dividedBy(e.workingSupply)},veTokenForLock:function(e,t){var r=(t-(new Date).getTime()/1e3)/h.a.DAY,n=new Date;n.setYear(n.getFullYear()+4);var a=e*r/(n.getTime()/1e3/h.a.DAY);return a||0},calculatedBoost:function(e,t,r,n,a){var o=this.veTokenForLock(n,a),i=this.totalSupply;return i.eq(0)?1:this.userBoostForEstimation(t,r,o,i)},applyBoost:function(){var e=Object(i.a)(p().mark((function e(t,r,n){var a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].gauge.ABI);case 2:return a=e.sent,o=new this.web3.eth.Contract(a,t.address),e.abrupt("return",this.runContractMethod(o.methods.user_checkpoint,[this.account],r,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),getRewardTokens:function(){var e=Object(i.a)(p().mark((function e(t,r){var n,a,o,i,c=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=[],a=[],e.next=6,h.a.loadABI(u.a.veToken[this.networkType].gauge.ABI);case 6:return o=e.sent,t.map((function(e){var t;(null===(t=e.rewardTokens)||void 0===t?void 0:t.length)>0&&(!e.rewardTokens[0].symbol||r)&&e.rewardTokens.map((function(t,r){n.push({reference:"symbol."+r+"."+e.symbol,contractAddress:t.address,abi:l.ERC20,calls:[{reference:"symbol",methodName:"symbol"},{reference:"decimals",methodName:"decimals"}],context:{index:r,gauge:e.symbol}}),a.push({reference:"claimable_reward."+r+"."+e.symbol,methodName:"claimable_reward_write",methodParameters:[c.account,t.address]})})),n.push({reference:"rewards",contractAddress:e.address,abi:o,calls:a})})),e.next=10,this.multiCaller.call(n);case 10:i=e.sent,t.map((function(e){e.rewardTokens.map((function(t,r){var n=i.results["symbol."+r+"."+e.symbol].callsReturnContext;t.symbol=s.a.pickFromMultiCallResults("symbol",n),t.decimals=s.a.pickFromMultiCallResults("decimals",n),t.reward=s.a.pickFromMultiCallResults("claimable_reward_write",i.results.rewards.callsReturnContext,"claimable_reward."+r+"."+e.symbol)}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),claimFilda:function(){var e=Object(i.a)(p().mark((function e(t,r,n){var a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].minter.ABI);case 2:return a=e.sent,o=new this.web3.eth.Contract(a,u.a.veToken[this.networkType].minter.address),e.abrupt("return",this.runContractMethod(o.methods.mint,[t],r,n));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),claimAll:function(){var e=Object(i.a)(p().mark((function e(t,r,n,a){var o,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.loadABI(u.a.veToken[this.networkType].rewardHelper.ABI);case 2:return o=e.sent,i=new this.web3.eth.Contract(o,u.a.veToken[this.networkType].rewardHelper.address),e.abrupt("return",this.runContractMethod(i.methods.claim_rewards_for,[this.account,t],r,n,null,a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),getPastLockEvent:function(){var e=Object(i.a)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getEscrowContract();case 3:return e.abrupt("return",e.sent.getPastEvents("Deposit",{fromBlock:u.a.veToken[this.networkType].voting_escrow.deployAt,toBlock:h.a.LiteralBlockNumber.LATEST,topics:[u.a.veToken.topics.deposit]}));case 6:return e.prev=6,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=2.b1090490.chunk.js.map
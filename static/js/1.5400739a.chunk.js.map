{"version":3,"sources":["utils/numberFormat.js","methods/CoreMethod.js","../node_modules/react-bootstrap/esm/Row.js","../node_modules/@restart/ui/esm/NoopTransition.js","../node_modules/@restart/ui/esm/TabPanel.js","../node_modules/@restart/ui/esm/Tabs.js","../node_modules/react-bootstrap/esm/getTabTransitionComponent.js","../node_modules/react-bootstrap/esm/TabContainer.js","../node_modules/react-bootstrap/esm/TabContent.js","../node_modules/react-bootstrap/esm/TabPane.js","../node_modules/react-bootstrap/esm/Tab.js","components/MarketTableV2/marketTable.module.scss","../node_modules/react-bootstrap/esm/Table.js","components/subComponents/DepositModalV2/DepositModal.js","components/subComponents/BorrowModalV2/BorrowModal.js","components/modals/MarketModal.js","components/MarketTableV2/marketTable.js"],"names":["formatBigNumber","num","decimals","isNaN","toNumber","toLocaleString","maximumFractionDigits","formatDecimalPlace","decimalPlace","reg","RegExp","test","toFixed","validateDecimal","decimalNum","approveERC20","web3","connectedAddress","networkType","market","contractABI","ABI","contractAddress","network","address","eth","Contract","contract","qContractAddress","qToken","maxApproval","BigNumber","pow","minus","CoreData","getGasInfo","gasInfo","max","toString","params","from","recomputeGas","methods","approve","send","response","approveSwapRepayERC20","Config","SwapRepayContract","approveDepositRepayERC20","DepositRepayContract","approveDepositSwapERC20","DepositSwapContract","approveLiquidateERC20","version","approveAddress","LiquidateContract","Row","React","ref","bsPrefix","className","as","Component","props","decoratedBsPrefix","useBootstrapPrefix","breakpoints","useBootstrapBreakpoints","sizePrefix","classes","forEach","brkPoint","cols","propValue","infix","push","_jsx","classNames","displayName","NoopTransition","children","inProp","in","mountOnEnter","unmountOnExit","hasEnteredRef","useRef","useEffect","current","_excluded","_excluded2","_excluded3","_objectWithoutPropertiesLoose","source","excluded","key","i","target","sourceKeys","Object","keys","length","indexOf","useTabPanel","_ref","active","eventKey","transition","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited","context","useContext","TabContext","assign","isActive","activeKey","getControlledId","getControllerId","rest","makeEventKey","id","TabPanel","_ref2","tabPanelProps","Transition","Provider","value","SelectableContext","hidden","Tabs","userId","generateCustomChildId","generateChildId","propsOnSelect","onSelect","propsActiveKey","defaultActiveKey","useUncontrolledProp","useSSRSafeId","useMemo","type","tabContext","Panel","getTabTransitionComponent","Fade","TabContainer","createWithBsPrefix","TabPane","prefix","propTypes","PropTypes","oneOfType","string","number","title","node","isRequired","disabled","bool","tabClassName","tabAttrs","object","Tab","Error","Container","Content","TabContent","Pane","module","exports","Table","striped","bordered","borderless","hover","size","variant","responsive","table","responsiveClass","DepositModal","WalletAddressContext","NetworkTypeContext","Web3Context","useTranslation","t","i18n","useState","inputValue","setInputValue","lowBalance","setLowBalance","loading","setLoading","depositCompleted","setDepositCompleted","depositFailed","setDepositFailed","txnHash","setTxnHash","needsFurtherApproval","setNeedsFurtherApproval","allowanceFormatted","setAllowanceFormatted","firstApproval","setFirstApproval","aboveAllDepositLimit","setAboveAllDepositLimit","isUnMountedRef","validateInput","isNegative","absoluteValue","data","supplyCapFormatted","Number","isLowBalance","isNativeToken","symbol","walletBalanceFormatted","lte","handleClose","closeModal","getRawValue","verifyFurtherApproval","txnValue","Promise","resolve","FetchData","getAccountAllowance","allowance","handleDeposit","handleUpdate","gtagParams","url","window","location","href","all","getQTokenContract","qContract","qContractMethod","mint","utils","toBN","toHex","on","hash","depositTxnHash","content","then","events","Failure","gtag","error","catch","code","handleApprove","first","CoreMethod","sleep","FooterList","isAllDec","availableWalletBalance","uiSymbol","TxnSuccessMsg","okText","handleOk","footerList","TxnErrorMsg","Consumer","ModalLoading","ModalFurtherApprovalRequest","showTitle","showTransation","ModalApprovalRequest","token","getApprovalMsgToken","ModalDepositForm","action","toLowerCase","controlId","onChange","e","showToggleButton","toggleButtonOnChange","calcValue","multipliedBy","style","width","marginTop","smallIconTips","Button","parseFloat","onClick","needsApproval","approved","BorrowModal","inSafe","borrowBtnDisabled","setBorrowBtnDisabled","borrowCheck","setBorrowCheck","borrowCompleted","setBorrowCompleted","borrowFailed","setBorrowFailed","aboveAllBorrowLimit","setAboveAllBorrowLimit","loanUsedPercentFixed2","totalloanbalance","fixedNaN","price","totalborrowlimitfiat","getValue","percent","borrowSafeMaxTotal","alreayBorrowAmount","accountLiquidity","marketLiquidity","liquidityFormatted","borrowSafeMax","borrowMaxTotal","borrowLimit","borrowAbove85","inputV","borrowCapFormatted","handleBorrow","borrowTxnHash","borrow","tooltipClassName","desc","Math","floor","ModalCannotBorrow","ModalNotSupportBorrow","isBorrowPaused","isLPToken","ModalRendered","toggleButtonNum","tips","checkId","checked","v","ModalBorrowForm","MarketModal","tabKey","setTabKey","onHide","Modal","aria-labelledby","centered","Header","closeButton","Body","Nav","Item","Link","MarketTable","history","useHistory","pathname","useLocation","modalMarketIndex","setModalMarketIndex","curList","setCurList","filterList","setFilterList","sortField","setSortField","sortDirection","setSortDirection","tabIndex","setTabIndex","marketModalShow","setMarketModalShow","undefined","isBankingPage","includes","filterResult","sortData","field","direction","list","compare","a","b","sort","aItem","name","toUpperCase","bItem","up","s1","s2","savingsAPY","plus","lpTotalAPY","savingsMintAPY","loanAPY","loanMintAPY","supplyMonthlyRewards","borrowMonthlyRewards","curCurrenry","liquidityFiat","totalBorrowedFormatted","totalBorrowedFiat","totalSupplyFormatted","totalSupplyFiat","utilRate","entries","parseInt","sortHandler","arr","index","findIndex","sortList","setCurListData","newList","filter","item","tabList","marketsLoading","styles","colSpan","height","speed","backgroundColor","loadingColors","background","foregroundColor","foreground","x","y","rx","ry","marketWrap","marketTitle","marketTotal","Col","sm","md","totalSize","totalBizSize","totalSupplyBorrow","totalTVLFiat","totalBorrow","marketTable","tabMenuContainer","btnGroup","map","tabMenuItem","handleSwitchTab","marketTableContainer","tableContainer","titleTxt","down","actions","marketRow","stopPropagation","language","handleClickDetail","asset","mode","logo1","logo2","src","logo","alt","dataContainer","dataPrimary","getCurrencyFormatted","dataSecondary","actionsTd","noData","show","totalBorrowLimitFiat","totalLoanBalance"],"mappings":"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","file":"static/js/1.5400739a.chunk.js","sourcesContent":["import { BigNumber } from 'bignumber.js'\r\n\r\nexport const formatBigNumber = (num, decimals) => {\r\n    if (isNaN(num) || num === null) {\r\n        return \"0\";\r\n    }\r\n\r\n    const n = (typeof num) === \"number\" ? num : num.toNumber();\r\n    return n.toLocaleString(\"en-US\", { maximumFractionDigits: decimals ?? 20 })\r\n}\r\n\r\nexport const formatDecimalNumber = (value) => {\r\n    const oldValue = new BigNumber(value);\r\n    if (oldValue.multipliedBy(100).abs() >= 1) {\r\n        return oldValue.toFixed(2, 1);\r\n    }\r\n    else if (oldValue.multipliedBy(100).abs() < 1 && oldValue.multipliedBy(10000).abs() >= 1) {\r\n        return oldValue.toFixed(4, 1);\r\n    }\r\n    else {\r\n        return oldValue.toString(10);\r\n    }\r\n}\r\n\r\nexport const formatBigNumberWithDecimals = (bigNumber, decimals, decimalPlace, toLocaleString) => {\r\n    if (!bigNumber) {\r\n        return\r\n    }\r\n\r\n    let dot = decimalPlace\r\n    // if (process.env.NODE_ENV === \"development\") {\r\n    //     dot = null\r\n    // }\r\n\r\n    if ((typeof bigNumber) === \"number\" || (typeof bigNumber) === \"string\") {\r\n        const n = new BigNumber(bigNumber).dividedBy(new BigNumber(10).pow(decimals))\r\n        if (toLocaleString) {\r\n            return n.toNumber().toLocaleString()\r\n        } else {\r\n            return n.toFixed(dot)\r\n        }\r\n    }\r\n\r\n    const n = bigNumber.dividedBy(new BigNumber(10).pow(decimals))\r\n    if (toLocaleString) {\r\n        return n.toNumber().toLocaleString()\r\n    } else {\r\n        return n.toFixed(dot)\r\n    }\r\n}\r\n\r\nexport const formatDecimalPlace = (num, decimalPlace = 4) => {\r\n    const reg = new RegExp('^(\\\\d)+(\\\\.(\\\\d){1,' + decimalPlace + '})?$')\r\n    return reg.test(num) ? num : num.toFixed(decimalPlace)\r\n}\r\n\r\n\r\n// 验证小数位数\r\nexport const validateDecimal = (decimalNum = 18) => new RegExp(\"^\\\\d*(\\\\.\\\\d{0,\" + decimalNum + \"})?$\")\r\n\r\n","import { BigNumber } from 'bignumber.js'\nimport CoreData from './CoreData'\nimport Config from '../utils/config'\n\nconst gasLimit = 1000000\n\nconst approveERC20 = async(web3, connectedAddress, networkType, market) => {\n\n    const contractABI = market.ABI;\n    const contractAddress = market.network[networkType].address;\n    let contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n    //erc20 qToken Info (eg: qDAI)\n    const qContractAddress = market.qToken.network[networkType].address;\n    const maxApproval = new BigNumber(2).pow(256).minus(1);\n\n    const gasInfo = await CoreData.getGasInfo(web3);\n\n    const max = maxApproval.toString(10);\n    let params = { from: connectedAddress };\n    params = await CoreData.recomputeGas(contract.methods.approve(qContractAddress, max), params, gasInfo, networkType);\n    let response = await contract.methods.approve(qContractAddress, max).send(params);\n\n    return response\n}\n\nconst approveSwapRepayERC20 = async(web3, connectedAddress, networkType, market) => {\n\n    const contractABI = market.ABI;\n    const contractAddress = market.network[networkType].address;\n    let contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n    const maxApproval = new BigNumber(2).pow(256).minus(1);\n\n    const gasInfo = await CoreData.getGasInfo(web3);\n\n    const max = maxApproval.toString(10);\n    let params = { from: connectedAddress };\n    params = await CoreData.recomputeGas(contract.methods.approve(Config.SwapRepayContract[networkType], max), params, gasInfo, networkType);\n    let response = await contract.methods.approve(Config.SwapRepayContract[networkType], max).send(params);\n\n    return response\n}\n\nconst approveDepositRepayERC20 = async(web3, connectedAddress, networkType, market) => {\n\n    const contractABI = market.qToken.ABI;\n    const contractAddress = market.qToken.network[networkType].address;\n    let contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n    const maxApproval = new BigNumber(2).pow(256).minus(1);\n\n    const gasInfo = await CoreData.getGasInfo(web3);\n\n    const max = maxApproval.toString(10);\n    let params = { from: connectedAddress };\n    params = await CoreData.recomputeGas(contract.methods.approve(Config.DepositRepayContract[networkType], max), params, gasInfo, networkType);\n    let response = await contract.methods.approve(Config.DepositRepayContract[networkType], max).send(params);\n\n    return response\n}\n\nconst approveDepositSwapERC20 = async(web3, connectedAddress, networkType, market) => {\n\n    const contractABI = market.qToken.ABI;\n    const contractAddress = market.qToken.network[networkType].address;\n    let contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n    const maxApproval = new BigNumber(2).pow(256).minus(1);\n\n    const gasInfo = await CoreData.getGasInfo(web3);\n\n    const max = maxApproval.toString(10);\n    let params = { from: connectedAddress };\n    params = await CoreData.recomputeGas(contract.methods.approve(Config.DepositSwapContract[networkType], max), params, gasInfo, networkType);\n    let response = await contract.methods.approve(Config.DepositSwapContract[networkType], max).send(params);\n\n    return response\n}\n\nconst approveLiquidateERC20 = async(web3, connectedAddress, networkType, market, version ='v1') => {\n\n    const contractABI = market.ABI;\n    const contractAddress = market.network[networkType].address;\n    let contract = await new web3.eth.Contract(contractABI, contractAddress);\n\n    const maxApproval = new BigNumber(2).pow(256).minus(1);\n\n    const gasInfo = await CoreData.getGasInfo(web3)\n\n    const approveAddress = version === 'v1' ? Config.LiquidateContract[networkType] : market.qToken.network[networkType].address;\n\n    const max = maxApproval.toString(10);\n    let params = { from: connectedAddress };\n    params = await CoreData.recomputeGas(contract.methods.approve(approveAddress, max), params, gasInfo, networkType);\n    let response = await contract.methods.approve(approveAddress, max).send(params);\n\n    return response\n}\n\nexport default {\n    approveERC20,\n    approveSwapRepayERC20,\n    approveLiquidateERC20,\n    approveDepositRepayERC20,\n    approveDepositSwapERC20\n}\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix, useBootstrapBreakpoints } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Row = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n  as: Component = 'div',\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'row');\n  const breakpoints = useBootstrapBreakpoints();\n  const sizePrefix = `${decoratedBsPrefix}-cols`;\n  const classes = [];\n  breakpoints.forEach(brkPoint => {\n    const propValue = props[brkPoint];\n    delete props[brkPoint];\n    let cols;\n\n    if (propValue != null && typeof propValue === 'object') {\n      ({\n        cols\n      } = propValue);\n    } else {\n      cols = propValue;\n    }\n\n    const infix = brkPoint !== 'xs' ? `-${brkPoint}` : '';\n    if (cols != null) classes.push(`${sizePrefix}${infix}-${cols}`);\n  });\n  return /*#__PURE__*/_jsx(Component, {\n    ref: ref,\n    ...props,\n    className: classNames(className, decoratedBsPrefix, ...classes)\n  });\n});\nRow.displayName = 'Row';\nexport default Row;","import { useEffect, useRef } from 'react';\n\nfunction NoopTransition({\n  children,\n  in: inProp,\n  mountOnEnter,\n  unmountOnExit\n}) {\n  const hasEnteredRef = useRef(inProp);\n  useEffect(() => {\n    if (inProp) hasEnteredRef.current = true;\n  }, [inProp]);\n  if (inProp) return children; // not in\n  //\n  // if (!mountOnEnter && !unmountOnExit) {\n  //   return children;\n  // }\n\n  if (unmountOnExit) {\n    return null;\n  }\n\n  if (!hasEnteredRef.current && mountOnEnter) {\n    return null;\n  }\n\n  return children;\n}\n\nexport default NoopTransition;","const _excluded = [\"active\", \"eventKey\", \"mountOnEnter\", \"transition\", \"unmountOnExit\", \"role\", \"onEnter\", \"onEntering\", \"onEntered\", \"onExit\", \"onExiting\", \"onExited\"],\n      _excluded2 = [\"activeKey\", \"getControlledId\", \"getControllerId\"],\n      _excluded3 = [\"as\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport TabContext from './TabContext';\nimport SelectableContext, { makeEventKey } from './SelectableContext';\nimport NoopTransition from './NoopTransition';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function useTabPanel(_ref) {\n  let {\n    active,\n    eventKey,\n    mountOnEnter,\n    transition,\n    unmountOnExit,\n    role = 'tabpanel',\n    onEnter,\n    onEntering,\n    onEntered,\n    onExit,\n    onExiting,\n    onExited\n  } = _ref,\n      props = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const context = useContext(TabContext);\n  if (!context) return [Object.assign({}, props, {\n    role\n  }), {\n    eventKey,\n    isActive: active,\n    mountOnEnter,\n    transition,\n    unmountOnExit,\n    onEnter,\n    onEntering,\n    onEntered,\n    onExit,\n    onExiting,\n    onExited\n  }];\n\n  const {\n    activeKey,\n    getControlledId,\n    getControllerId\n  } = context,\n        rest = _objectWithoutPropertiesLoose(context, _excluded2);\n\n  const key = makeEventKey(eventKey);\n  return [Object.assign({}, props, {\n    role,\n    id: getControlledId(eventKey),\n    'aria-labelledby': getControllerId(eventKey)\n  }), {\n    eventKey,\n    isActive: active == null && key != null ? makeEventKey(activeKey) === key : active,\n    transition: transition || rest.transition,\n    mountOnEnter: mountOnEnter != null ? mountOnEnter : rest.mountOnEnter,\n    unmountOnExit: unmountOnExit != null ? unmountOnExit : rest.unmountOnExit,\n    onEnter,\n    onEntering,\n    onEntered,\n    onExit,\n    onExiting,\n    onExited\n  }];\n}\nconst TabPanel = /*#__PURE__*/React.forwardRef( // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n(_ref2, ref) => {\n  let {\n    as: Component = 'div'\n  } = _ref2,\n      props = _objectWithoutPropertiesLoose(_ref2, _excluded3);\n\n  const [tabPanelProps, {\n    isActive,\n    onEnter,\n    onEntering,\n    onEntered,\n    onExit,\n    onExiting,\n    onExited,\n    mountOnEnter,\n    unmountOnExit,\n    transition: Transition = NoopTransition\n  }] = useTabPanel(props); // We provide an empty the TabContext so `<Nav>`s in `<TabPanel>`s don't\n  // conflict with the top level one.\n\n  return /*#__PURE__*/_jsx(TabContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(SelectableContext.Provider, {\n      value: null,\n      children: /*#__PURE__*/_jsx(Transition, {\n        in: isActive,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered,\n        onExit: onExit,\n        onExiting: onExiting,\n        onExited: onExited,\n        mountOnEnter: mountOnEnter,\n        unmountOnExit: unmountOnExit,\n        children: /*#__PURE__*/_jsx(Component, Object.assign({}, tabPanelProps, {\n          ref: ref,\n          hidden: !isActive,\n          \"aria-hidden\": !isActive\n        }))\n      })\n    })\n  });\n});\nTabPanel.displayName = 'TabPanel';\nexport default TabPanel;","import * as React from 'react';\nimport { useMemo } from 'react';\nimport { useUncontrolledProp } from 'uncontrollable';\nimport { useSSRSafeId } from './ssr';\nimport TabContext from './TabContext';\nimport SelectableContext from './SelectableContext';\nimport TabPanel from './TabPanel';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst Tabs = props => {\n  const {\n    id: userId,\n    generateChildId: generateCustomChildId,\n    onSelect: propsOnSelect,\n    activeKey: propsActiveKey,\n    defaultActiveKey,\n    transition,\n    mountOnEnter,\n    unmountOnExit,\n    children\n  } = props;\n  const [activeKey, onSelect] = useUncontrolledProp(propsActiveKey, defaultActiveKey, propsOnSelect);\n  const id = useSSRSafeId(userId);\n  const generateChildId = useMemo(() => generateCustomChildId || ((key, type) => id ? `${id}-${type}-${key}` : null), [id, generateCustomChildId]);\n  const tabContext = useMemo(() => ({\n    onSelect,\n    activeKey,\n    transition,\n    mountOnEnter: mountOnEnter || false,\n    unmountOnExit: unmountOnExit || false,\n    getControlledId: key => generateChildId(key, 'tabpane'),\n    getControllerId: key => generateChildId(key, 'tab')\n  }), [onSelect, activeKey, transition, mountOnEnter, unmountOnExit, generateChildId]);\n  return /*#__PURE__*/_jsx(TabContext.Provider, {\n    value: tabContext,\n    children: /*#__PURE__*/_jsx(SelectableContext.Provider, {\n      value: onSelect || null,\n      children: children\n    })\n  });\n};\n\nTabs.Panel = TabPanel;\nexport default Tabs;","import NoopTransition from '@restart/ui/NoopTransition';\nimport Fade from './Fade';\nexport default function getTabTransitionComponent(transition) {\n  if (typeof transition === 'boolean') {\n    return transition ? Fade : NoopTransition;\n  }\n\n  return transition;\n}","import * as React from 'react';\nimport Tabs from '@restart/ui/Tabs';\nimport getTabTransitionComponent from './getTabTransitionComponent';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nconst TabContainer = ({\n  transition,\n  ...props\n}) => /*#__PURE__*/_jsx(Tabs, { ...props,\n  transition: getTabTransitionComponent(transition)\n});\n\nTabContainer.displayName = 'TabContainer';\nexport default TabContainer;","import createWithBsPrefix from './createWithBsPrefix';\nexport default createWithBsPrefix('tab-content');","import classNames from 'classnames';\nimport * as React from 'react';\nimport SelectableContext from '@restart/ui/SelectableContext';\nimport TabContext from '@restart/ui/TabContext';\nimport { useTabPanel } from '@restart/ui/TabPanel';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport getTabTransitionComponent from './getTabTransitionComponent';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst TabPane = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  transition,\n  ...props\n}, ref) => {\n  const [{\n    className,\n    // Need to define the default \"as\" during prop destructuring to be compatible with styled-components github.com/react-bootstrap/react-bootstrap/issues/3595\n    as: Component = 'div',\n    ...rest\n  }, {\n    isActive,\n    onEnter,\n    onEntering,\n    onEntered,\n    onExit,\n    onExiting,\n    onExited,\n    mountOnEnter,\n    unmountOnExit,\n    transition: Transition = Fade\n  }] = useTabPanel({ ...props,\n    transition: getTabTransitionComponent(transition)\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'tab-pane'); // We provide an empty the TabContext so `<Nav>`s in `<TabPanel>`s don't\n  // conflict with the top level one.\n\n  return /*#__PURE__*/_jsx(TabContext.Provider, {\n    value: null,\n    children: /*#__PURE__*/_jsx(SelectableContext.Provider, {\n      value: null,\n      children: /*#__PURE__*/_jsx(Transition, {\n        in: isActive,\n        onEnter: onEnter,\n        onEntering: onEntering,\n        onEntered: onEntered,\n        onExit: onExit,\n        onExiting: onExiting,\n        onExited: onExited,\n        mountOnEnter: mountOnEnter,\n        unmountOnExit: unmountOnExit,\n        children: /*#__PURE__*/_jsx(Component, { ...rest,\n          ref: ref,\n          className: classNames(className, prefix, isActive && 'active')\n        })\n      })\n    })\n  });\n});\nTabPane.displayName = 'TabPane';\nexport default TabPane;","import PropTypes from 'prop-types';\nimport * as React from 'react';\nimport TabContainer from './TabContainer';\nimport TabContent from './TabContent';\nimport TabPane from './TabPane';\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\n/* eslint-disable react/no-unused-prop-types */\nconst propTypes = {\n  eventKey: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\n  /**\n   * Content for the tab title.\n   */\n  title: PropTypes.node.isRequired,\n\n  /**\n   * The disabled state of the tab.\n   */\n  disabled: PropTypes.bool,\n\n  /**\n   * Class to pass to the underlying nav link.\n   */\n  tabClassName: PropTypes.string,\n\n  /**\n   * Object containing attributes to pass to underlying nav link.\n   */\n  tabAttrs: PropTypes.object\n};\n\nconst Tab = () => {\n  throw new Error('ReactBootstrap: The `Tab` component is not meant to be rendered! ' + \"It's an abstract component that is only valid as a direct Child of the `Tabs` Component. \" + 'For custom tabs components use TabPane and TabsContainer directly'); // Needed otherwise docs error out.\n\n  return /*#__PURE__*/_jsx(_Fragment, {});\n};\n\nTab.propTypes = propTypes;\nexport default Object.assign(Tab, {\n  Container: TabContainer,\n  Content: TabContent,\n  Pane: TabPane\n});","// extracted by mini-css-extract-plugin\nmodule.exports = {\"marketWrap\":\"marketTable_marketWrap__13wdK\",\"marketTitle\":\"marketTable_marketTitle__3QqWZ\",\"marketTotal\":\"marketTable_marketTotal__iQNzJ\",\"num\":\"marketTable_num__1nnWS\",\"percentNum\":\"marketTable_percentNum__1V-VB\",\"add\":\"marketTable_add__RLr7u\",\"sub\":\"marketTable_sub__1tn-n\",\"totalSize\":\"marketTable_totalSize__Vmc50\",\"totalSupplyBorrow\":\"marketTable_totalSupplyBorrow__-nDOx\",\"marketTable\":\"marketTable_marketTable__8CXus\",\"loading\":\"marketTable_loading__279c_\",\"noData\":\"marketTable_noData__1Rt9H\",\"tabMenuContainer\":\"marketTable_tabMenuContainer__1IF0E\",\"switchChain\":\"marketTable_switchChain__16YaL\",\"tabMenuItem\":\"marketTable_tabMenuItem__33s18\",\"active\":\"marketTable_active__8jgOe\",\"totalMarketData\":\"marketTable_totalMarketData__3LgtC\",\"label\":\"marketTable_label__34xzp\",\"value\":\"marketTable_value__JrH_M\",\"marketTableContainer\":\"marketTable_marketTableContainer__1JYZH\",\"actions\":\"marketTable_actions__2xRAZ\",\"titleTxt\":\"marketTable_titleTxt__1UBd9\",\"down\":\"marketTable_down__1FP7Z\",\"up\":\"marketTable_up__33x7R\",\"marketRow\":\"marketTable_marketRow__2qqFk\",\"asset\":\"marketTable_asset__2b3oF\",\"name\":\"marketTable_name__2tWYZ\",\"dataContainer\":\"marketTable_dataContainer__1d6N_\",\"dataPrimary\":\"marketTable_dataPrimary__2UjwT\",\"dataSecondary\":\"marketTable_dataSecondary__33hle\",\"actionsTd\":\"marketTable_actionsTd__3ABTM\",\"toolTipList\":\"marketTable_toolTipList__nlhI2\",\"toolTipItem\":\"marketTable_toolTipItem__3AbEu\",\"hd\":\"marketTable_hd__1V97P\",\"bd\":\"marketTable_bd__1dURJ\",\"btnGroup\":\"marketTable_btnGroup__3A_un\"};","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-striped`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n\n  const table = /*#__PURE__*/_jsx(\"table\", { ...props,\n    className: classes,\n    ref: ref\n  });\n\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n\n  return table;\n});\nexport default Table;","import React, { useContext, useEffect, useState, useRef } from 'react'\nimport { Button } from 'react-bootstrap'\nimport classNames from 'classnames'\nimport { useTranslation } from 'react-i18next'\nimport { BigNumber } from 'bignumber.js'\nimport log from '../../../utils/logger'\nimport CoreMethod from '../../../methods/CoreMethod'\nimport CoreData from '../../../methods/CoreData'\nimport FetchData from '../../../methods/FetchData'\nimport { sleep } from '../../../utils/promise'\nimport { NetworkTypeContext, WalletAddressContext, Web3Context, DataContext } from '../../../context'\nimport { ModalSucAndFail, ModalInput, ModalTips } from '../../../components/littleComponents'\nimport { validateDecimal } from '../../../utils/numberFormat'\n\nexport const DepositModal = (props) => {\n    const { connectedAddress } = useContext(WalletAddressContext)\n    const { networkType } = useContext(NetworkTypeContext)\n    const { web3 } = useContext(Web3Context)\n\n    const { t, i18n } = useTranslation();\n    const [inputValue, setInputValue] = useState('')\n    const [lowBalance, setLowBalance] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const [depositCompleted, setDepositCompleted] = useState(false)\n    const [depositFailed, setDepositFailed] = useState(false)\n    const [txnHash, setTxnHash] = useState('')\n    const [needsFurtherApproval, setNeedsFurtherApproval] = useState(false)\n    const [allowanceFormatted, setAllowanceFormatted] = useState('')\n    const [firstApproval, setFirstApproval] = useState(true)\n    const [aboveAllDepositLimit, setAboveAllDepositLimit] = useState(false)\n    const isUnMountedRef = useRef(false)\n\n    const toggleButtonNum = ['25', '50', '75', '100']\n    const decimalNum = 8\n\n\n    const validateInput = async (value) => {\n        let inputValue = BigNumber(value).isNegative() ? BigNumber(value).absoluteValue().toString() : value\n\n        if (!validateDecimal(decimalNum).test(inputValue)) {\n            inputValue = BigNumber(inputValue).toFixed(decimalNum, 3)\n        } \n        setInputValue(inputValue)\n\n\n        if (props.data.supplyCapFormatted !== 0 && Number(inputValue) > props.data.supplyCapFormatted) {\n            setAboveAllDepositLimit(true)\n            return\n        }\n       \n        const isLowBalance = CoreData.isNativeToken(props.data.symbol, networkType) \n                                ? new BigNumber(props.data.walletBalanceFormatted).minus(0.1).lte(new BigNumber(inputValue)) \n                                : new BigNumber(props.data.walletBalanceFormatted).lte(new BigNumber(inputValue))\n        setLowBalance(isLowBalance)\n    }\n\n    const resetErrorTips = () => {\n        setLowBalance(false)\n        setAboveAllDepositLimit(false)\n    }\n\n    const handleClose = async (closeModal = true, clearData = true) => {\n        if (clearData) {\n            setInputValue('')\n        }\n        setLowBalance(false)\n        setLoading(false)\n        setDepositCompleted(false)\n        setDepositFailed(false)\n        setTxnHash('')\n        setNeedsFurtherApproval(false)\n        setAllowanceFormatted('')\n        setFirstApproval(true)\n        setAboveAllDepositLimit(false)\n        if (closeModal) {\n            props.handleClose()\n            isUnMountedRef.current = true\n        }\n    }\n\n    const getRawValue = async (value) => {\n        return CoreData.getRawValue(web3, networkType, props.data.symbol, value)\n    }\n\n    const verifyFurtherApproval = async (txnValue) => {\n        if (CoreData.isNativeToken(props.data.symbol, networkType)) return Promise.resolve(true)\n\n        const { allowance, allowanceFormatted } = await FetchData.getAccountAllowance(web3, connectedAddress, networkType, props.data)\n        if (allowance && allowance < Number(txnValue)) {\n            setNeedsFurtherApproval(true)\n            setAllowanceFormatted(allowanceFormatted)\n            return Promise.resolve(false)\n        }\n\n        setNeedsFurtherApproval(false)\n        setAllowanceFormatted('')\n        return Promise.resolve(true)\n    }\n\n    const handleDeposit = async (handleUpdate) => {\n        const gtagParams = {\n            url: window.location.href,\n            symbol: props.data.symbol,\n        }\n        setFirstApproval(true)\n        setLoading(true)\n\n        const txnValue = await getRawValue(inputValue)\n        const isValidAllowance = await verifyFurtherApproval(txnValue)\n        if (!isValidAllowance) {\n            setLoading(false)\n            return\n        }\n\n        const [qContract, gasInfo] = await Promise.all([\n            CoreData.getQTokenContract(web3, networkType, props.data.symbol),\n            CoreData.getGasInfo(web3)\n        ])\n\n        const isNativeToken = CoreData.isNativeToken(props.data.symbol, networkType)\n\n        const qContractMethod =  isNativeToken ? qContract.methods.mint() : qContract.methods.mint(web3.utils.toBN(txnValue))\n        \n        let params = { from: connectedAddress }\n\n        if (isNativeToken) {\n            params.value = web3.utils.toHex(txnValue)\n        }\n\n        params = await CoreData.recomputeGas(qContractMethod, params, gasInfo, networkType);\n        await qContractMethod.send(params)\n        .on('transactionHash', function (hash) {\n            props.data.depositTxnHash = {\n                hash,\n                content: t('Pending.DepositInProgress')\n            }\n            if (!isUnMountedRef.current) {\n                setTxnHash(hash) \n            }\n        })\n        .then(response => {\n            if (response.events.Failure) {\n                    window.gtag('event', 'deposit', {\n                        ...gtagParams,\n                        error: 'response event fail'\n                    })\n                    if (!isUnMountedRef.current) {\n                        setDepositFailed(true)\n                        setLoading(false)\n                    }\n            } else {\n                window.gtag('event', 'deposit', gtagParams)\n                if (!isUnMountedRef.current) {\n                    handleUpdate()\n                    setDepositCompleted(true)\n                    setLoading(false)\n                }\n            }\n            props.data.depositTxnHash = null\n        })\n        .catch(error => {\n            if (error.code === 4001) {\n                window.gtag('event', 'deposit', {\n                    ...gtagParams,\n                    error: 'user rejected'\n                })\n                if (!isUnMountedRef.current) {\n                    handleClose(false, false)\n                }\n            } else {\n                window.gtag('event', 'deposit', {\n                    ...gtagParams,\n                    error: 'other error'\n                })\n                if (!isUnMountedRef.current) {\n                    setDepositFailed(true)\n                    setLoading(false)\n                }\n                props.data.depositTxnHash = null\n            }\n        })               \n    }\n\n    const handleApprove = async (first = true) => {\n        setLoading(true)\n        await CoreMethod.approveERC20(web3, connectedAddress, networkType, props.data)\n            .then(async response => {\n                if (response) {\n                    if (first) {\n                        setFirstApproval(false)\n                    } else {\n                        const txnValue = await getRawValue(inputValue)\n                        await sleep()\n                        const isValidAllowance = await verifyFurtherApproval(txnValue)\n                        isValidAllowance && setFirstApproval(false)\n                    }\n                }\n                setLoading(false)\n            })\n            .catch(error => {\n                if (error.code === 4001) {\n                    handleClose(false, false)\n                }\n            })\n    }\n\n    const changeInputValue = (value) => {\n        resetErrorTips()\n\n        let calcValue\n        if(CoreData.isNativeToken(props.data.symbol, networkType)) {\n            calcValue = new BigNumber(props.data.walletBalanceFormatted).minus(0.1).multipliedBy(value)\n            if (calcValue.isNegative()) {\n                setInputValue('0')\n                return\n            }\n        } else {\n            calcValue = new BigNumber(props.data.walletBalanceFormatted).multipliedBy(value)\n        }\n        if (validateDecimal(decimalNum).test(+calcValue)) {\n            calcValue = calcValue.toString()\n        } else {\n            calcValue = calcValue.toFixed(decimalNum, 3) \n        }\n        setInputValue(calcValue)\n    }\n\n    const availableWalletBalance = (isAllDec) => {\n        if (CoreData.isNativeToken(props.data.symbol, networkType)) {\n            const value = BigNumber(props.data.walletBalanceFormatted).minus(0.1)\n            return value.isNegative() ? '0' : (isAllDec ? value.toString() : value.toFixed(4))\n        } else {\n            return isAllDec ? BigNumber(props.data.walletBalanceFormatted).toString() : BigNumber(props.data.walletBalanceFormatted).toFixed(4)\n        }\n    }\n\n    //UI Rendering\n\n    const FooterList = <div className=\"footerList\">\n        <div className=\"footerItem\">\n            <div className=\"label\">{t('Banking.DepositModal.AvailableWalletBalance')}</div>\n            <div className=\"value\">\n                {`${availableWalletBalance(false)} ${props.data.uiSymbol || props.data.symbol}`}\n            </div>\n        </div>\n    </div>\n\n    const TxnSuccessMsg =\n    <ModalSucAndFail \n        type=\"success\"\n        txnHash={txnHash}\n        content={t('Banking.DepositModal.SuccessMsg')}\n        okText='OK'\n        handleOk={() => handleClose(false)}\n        footerList={FooterList}\n    />\n\n\n    const TxnErrorMsg = \n    <DataContext.Consumer>\n        {\n            ({handleUpdate}) => (\n                <ModalSucAndFail \n                    type=\"error\"\n                    txnHash={txnHash}\n                    title={t('Banking.DepositModal.ErrorMsg')}\n                    okText={t('CommonModal.Retry')}\n                    handleOk={() => handleDeposit(handleUpdate)}\n                    footerList={FooterList}\n                />\n            )\n        }\n    </DataContext.Consumer>\n\n\n    const ModalLoading = \n    <ModalSucAndFail \n        type=\"loading\"\n        txnHash={txnHash}\n        title={t('CommonModal.PleaseWait')}\n    />\n\n    const ModalFurtherApprovalRequest = \n    <ModalSucAndFail \n        type=\"approve\"\n        showTitle={false}\n        showTransation={false}\n        content={t('CommonModal.FurtherApprovalMsg', { type: t('Banking.DepositModal.SavingsBalance'), inputValue, allowanceFormatted })}\n        okText={t('CommonModal.FurtherApprove')}\n        handleOk={() => handleApprove(false)}\n    />\n\n    const ModalApprovalRequest = \n    <ModalSucAndFail \n        type=\"approve\"\n        showTitle={false}\n        showTransation={false}\n        content={t('CommonModal.ApprovalMsg', {token: CoreData.getApprovalMsgToken(networkType)})}\n        okText={t('CommonModal.Approve')}\n        handleOk={() => handleApprove(true)}\n    />\n\n    const ModalDepositForm = \n    <div className=\"contentContainer\">\n        <div className=\"formContainer\">\n            <div className=\"formHdTips\">\n                {t('CommonModal.formHdTips', {\n                  symbol: props?.data?.symbol,\n                  action: t('Banking.Markets.Deposit').toLowerCase()\n                })}\n            </div>\n            <ModalInput\n                controlId=\"formDeposit\"\n                data={props.data}\n                inputValue={inputValue}\n                onChange={e => validateInput(e.target.value)}\n                showToggleButton={true}\n                toggleButtonOnChange={changeInputValue}\n            />\n            <div style={{width: '100%', marginTop: '23px'}}>\n                {\n                    aboveAllDepositLimit ? (\n                    <ModalTips \n                        smallIconTips={true}\n                        showTitle={false}\n                        type={'errorTips'} \n                        content={t('Banking.DepositModal.ExceedsDepositLimit')}\n                    />\n                    ) : lowBalance && (\n                    <ModalTips \n                        smallIconTips={true}\n                        showTitle={false}\n                        type={'errorTips'} \n                        content={t('Banking.DepositModal.InsufficientBalance')}\n                    />\n                    )\n                }\n            </div>\n        </div>\n        <div className=\"buttonsContainer\">\n            <DataContext.Consumer>\n                {\n                    ({handleUpdate}) => (\n                        <Button \n                            variant=\"green\" \n                            disabled={aboveAllDepositLimit || lowBalance || isNaN(parseFloat(inputValue)) || parseFloat(inputValue) <= 0}\n                            onClick={() => handleDeposit(handleUpdate)}\n                        >\n                            {t('Banking.Markets.Deposit')}\n                        </Button>\n                    )\n                }\n            </DataContext.Consumer>\n        </div>\n        {FooterList}\n    </div>\n\n    const needsApproval = props.data && !(props.data.approved) && firstApproval\n    const ModalLoaded = needsApproval ?  ModalApprovalRequest : ModalDepositForm\n    const ModalRendered = needsFurtherApproval ? ModalFurtherApprovalRequest : ModalLoaded\n\n    return loading ? ModalLoading : \n                depositCompleted ? TxnSuccessMsg : \n                    depositFailed ? TxnErrorMsg : ModalRendered\n}\n","import React, { useContext, useEffect, useState, useRef } from 'react'\nimport { Button, Modal, Form, ToggleButtonGroup, ToggleButton } from 'react-bootstrap'\nimport classNames from 'classnames'\nimport { useTranslation } from 'react-i18next'\nimport { BigNumber } from 'bignumber.js'\nimport CoreData from '../../../methods/CoreData'\nimport log from '../../../utils/logger'\nimport { NetworkTypeContext, WalletAddressContext, Web3Context, DataContext } from '../../../context'\nimport { ModalSucAndFail, ModalInput, ModalTips, ModalPercent, ModalTipsAndCheckBox, TorTooltip } from '../../../components/littleComponents'\nimport { validateDecimal } from '../../../utils/numberFormat'\n\nexport const BorrowModal = (props) => {\n    const { connectedAddress } = useContext(WalletAddressContext)\n    const { networkType } = useContext(NetworkTypeContext)\n    const { web3, inSafe } = useContext(Web3Context)\n\n    const { t, i18n } = useTranslation()\n    const [inputValue, setInputValue] = useState('')\n    const [borrowBtnDisabled, setBorrowBtnDisabled] = useState(false)\n    const [borrowCheck, setBorrowCheck] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const [borrowCompleted, setBorrowCompleted] = useState(false)\n    const [borrowFailed, setBorrowFailed] = useState(false)\n    const [txnHash, setTxnHash] = useState('')\n    const [aboveAllBorrowLimit, setAboveAllBorrowLimit] = useState(false)\n    const isUnMountedRef = useRef(false)\n\n    const decimalNum = 8\n\n    let updatedLoanBalance = props.totalloanbalance + (CoreData.fixedNaN(inputValue) * props.data.price)\n    const loanUsedPercent = (updatedLoanBalance / props.totalborrowlimitfiat) * 100\n\n\n    let loanUsedPercentFixed2 = loanUsedPercent.toFixed(2)\n    if (loanUsedPercentFixed2 === \"NaN\" || loanUsedPercentFixed2 === \"Infinity\") {\n        loanUsedPercentFixed2 = \"0\"\n    }\n\n    const getValue = (percent = 1) => {\n      const borrowSafeMaxTotal = (props.totalborrowlimitfiat / props.data.price) * percent\n      const alreayBorrowAmount = props.totalloanbalance / props.data.price\n      let accountLiquidity = alreayBorrowAmount >= borrowSafeMaxTotal ? 0 : borrowSafeMaxTotal - alreayBorrowAmount\n      let marketLiquidity = props.data.liquidityFormatted\n      let borrowSafeMax = accountLiquidity > marketLiquidity ? marketLiquidity : accountLiquidity\n      borrowSafeMax = CoreData.fixedNaN(borrowSafeMax)\n\n      return borrowSafeMax\n    }\n\n    const borrowLimit = 90\n    const borrowMaxTotal = getValue(borrowLimit * 0.01)\n    const borrowAbove85 = getValue(0.85)\n\n    const validateInput = async (value) => {\n        let inputValue = BigNumber(value).isNegative() ? BigNumber(value).absoluteValue().toString() : value\n\n        if (!validateDecimal(decimalNum).test(inputValue)) {\n            inputValue = BigNumber(inputValue).toFixed(decimalNum, 3)\n        } \n        setInputValue(inputValue)\n\n        const inputV = Number(inputValue)\n\n        if (props.data.borrowCapFormatted !== 0 && inputV > props.data.borrowCapFormatted) {\n          setBorrowBtnDisabled(true)\n          setAboveAllBorrowLimit(true)\n          return\n        }\n\n        if (inputV <= borrowAbove85) {\n            // <=85%\n            setBorrowBtnDisabled(false)\n        } else if (inputV > borrowAbove85 && inputV <= borrowMaxTotal) {\n            // >85% && <90\n            setBorrowBtnDisabled(!borrowCheck)\n        } else {\n            // >90%\n            setBorrowBtnDisabled(true)\n        }\n    }\n\n    useEffect(() => {\n        setBorrowBtnDisabled(!borrowCheck)\n    }, [borrowCheck])\n\n    const handleClose = async (closeModal = true, clearData = true) => {\n        if (clearData) {\n            setInputValue('')\n        }\n        setBorrowBtnDisabled(false)\n        setBorrowCheck(false)\n        setLoading(false)\n        setBorrowCompleted(false)\n        setBorrowFailed(false)\n        setTxnHash('')\n        setAboveAllBorrowLimit(false)\n        if (closeModal) {\n            props.handleClose('borrow')\n            isUnMountedRef.current = true\n        }\n    }\n\n    const handleBorrow = async (handleUpdate) => {\n        const gtagParams = {\n            url: window.location.href,\n            symbol: props.data.symbol,\n        }\n        setLoading(true)\n\n        const contract = await CoreData.getQTokenContract(web3, networkType, props.data.symbol)\n        if (!contract) {\n            setBorrowFailed(true)\n            props.data.borrowTxnHash = null\n            setLoading(false)\n            return \n        }\n\n        const gasInfo = await CoreData.getGasInfo(web3)\n\n        const txnValue = await CoreData.getRawValue(web3, networkType, props.data.symbol, inputValue);\n        \n        let params = { from: connectedAddress };\n        if(!inSafe){\n            params = await CoreData.recomputeGas(contract.methods.borrow(txnValue), params, gasInfo, networkType);\n        }\n        \n        await contract.methods.borrow(txnValue).send(params)\n            .on('transactionHash', function (hash) {\n                props.data.borrowTxnHash = {\n                  hash,\n                  content: t('Pending.BorrowInProgress')\n                }\n                if (!isUnMountedRef.current) {\n                  setTxnHash(hash)\n                }\n            })\n            .then(response => {\n                if (response.events.Failure) {\n                    window.gtag('event', 'borrow', {\n                        ...gtagParams,\n                        error: 'response event fail'\n                    })\n                    if (!isUnMountedRef.current) {\n                      setBorrowFailed(true)\n                      setLoading(false)\n                    }\n                } else {\n                    window.gtag('event', 'borrow', gtagParams)\n                    if (!isUnMountedRef.current) {\n                      handleUpdate()\n                      setBorrowCompleted(true)\n                      setLoading(false)\n                    }\n                }\n                props.data.borrowTxnHash = null\n            })\n            .catch(error => {\n                if (error.code === 4001) {\n                    window.gtag('event', 'borrow', {\n                        ...gtagParams,\n                        error: 'user rejected'\n                    })\n                    if (!isUnMountedRef.current) {\n                      handleClose(false, false)\n                    }\n                } else {\n                    window.gtag('event', 'borrow', {\n                        ...gtagParams,\n                        error: 'other error'\n                    })\n                    if (!isUnMountedRef.current) {\n                      setBorrowFailed(true)\n                      setLoading(false)\n                    }\n                    props.data.borrowTxnHash = null\n                }\n            })\n    }\n\n    //UI Rendering\n\n    const FooterList = \n    <div className=\"footerList\">\n        <div className=\"footerItem\">\n            <div className=\"label\">\n                <TorTooltip\n                    type=\"icon\"\n                    title={t('Banking.BorrowModal.BorrowSafeMax')}\n                    tooltipClassName=\"dailyReward-tooltips\"\n                    desc={t('Banking.BorrowModal.BorrowSafeMax-info1')}\n                />\n            </div>\n            <div className=\"value\">\n                {`${(Math.floor(parseFloat(borrowAbove85) * 100) / 100).toFixed(2)} ${props.data.uiSymbol || props.data.symbol}`}\n            </div>\n        </div>\n    </div>\n\n\n    const TxnSuccessMsg =\n    <ModalSucAndFail \n        type=\"success\"\n        txnHash={txnHash}\n        content={t('Banking.BorrowModal.SuccessMsg')}\n        okText='OK'\n        handleOk={() => handleClose(false)}\n        footerList={FooterList}\n    />\n\n    const TxnErrorMsg =\n    <DataContext.Consumer>\n        {\n            ({handleUpdate}) => (\n                <ModalSucAndFail \n                    type=\"error\"\n                    txnHash={txnHash}\n                    title={t('Banking.BorrowModal.ErrorMsg')}\n                    okText={t('CommonModal.Retry')}\n                    handleOk={() => handleBorrow(handleUpdate)}\n                    footerList={FooterList}\n                />\n            )\n        }\n    </DataContext.Consumer>\n\n\n    const ModalLoading = \n    <ModalSucAndFail \n        type=\"loading\"\n        txnHash={txnHash}\n        title={t('CommonModal.PleaseWait')}\n    />\n\n    const ModalCannotBorrow = \n    <ModalSucAndFail \n        type=\"warning\"\n        title={t('Banking.BorrowModal.CannotBorrowMsgTitle')}\n        content={t('Banking.BorrowModal.CannotBorrowMsgDesc')}\n        showTransation={false}\n    />\n\n    const ModalBorrowForm = () => {\n        return (\n            <div className=\"contentContainer\">\n                <div className=\"formContainer\">\n                    <div className=\"formHdTips\">\n                        {t('CommonModal.formHdTips', {\n                        symbol: props?.data?.symbol,\n                        action: t('Banking.Markets.Borrow').toLowerCase()\n                        })}\n                    </div>\n                    <ModalInput\n                        controlId=\"formBorrow\"\n                        data={props.data}\n                        inputValue={inputValue}\n                        onChange={e => validateInput(e.target.value)}\n                        showToggleButton={true}\n                        toggleButtonNum={['25', '50', '75', borrowLimit]}\n                        toggleButtonOnChange={(value) => {\n                            let inputValue = new BigNumber(borrowMaxTotal).multipliedBy(value)\n                            validateInput(inputValue)\n                        }}\n                    />\n                    <ModalPercent\n                        percent={loanUsedPercentFixed2}\n                        tips={t('Banking.BorrowModal.Info')}\n                    />\n                    {\n                        \n                        // Number(loanUsedPercentFixed2) > borrowLimit || aboveAllBorrowLimit ? \n                        (Number(inputValue) > Number(borrowMaxTotal) || aboveAllBorrowLimit) &&\n                        (\n                            <ModalTips \n                                smallIconTips={true}\n                                showTitle={false}\n                                type={'errorTips'} \n                                content={t('Banking.BorrowModal.ExceedsBorrowLimit')}\n                            />\n                        )\n                    }\n                    {\n                        // (Number(loanUsedPercentFixed2) > 85 && Number(loanUsedPercentFixed2) <= borrowLimit) && \n                        Number(inputValue) > Number(borrowAbove85) && Number(inputValue) <= Number(borrowMaxTotal) &&\n                        (\n                            <ModalTipsAndCheckBox\n                                type={'warningTips'}\n                                content={t('Banking.BorrowModal.BorrowCheckTips')}\n                                checkId={'borrowCheck'}\n                                checked={borrowCheck}\n                                onChange={() => setBorrowCheck(v => !v)}\n                            />\n                        )\n                    }\n                </div>\n                <div className=\"buttonsContainer\">\n                    <DataContext.Consumer>\n                        {\n                            ({handleUpdate}) => (\n                                <Button \n                                    variant=\"blue\" \n                                    disabled= {borrowBtnDisabled || isNaN(parseFloat(inputValue)) || parseFloat(inputValue) <= 0}\n                                    onClick={() => handleBorrow(handleUpdate)}\n                                >\n                                    {t('Banking.Markets.Borrow')}\n                                </Button>\n                            )\n                        }\n                    </DataContext.Consumer>\n                </div>\n                {FooterList}\n            </div>\n        )\n    }\n\n\n    const ModalNotSupportBorrow = \n    <ModalSucAndFail \n        type=\"error\"\n        showTitle={false}\n        content={t('Banking.BorrowModal.NotSupport')}\n        showTransation={false}\n    />\n\n    if (props.data.isBorrowPaused || props.data.isLPToken ) return ModalNotSupportBorrow\n\n    const ModalRendered = Number(props.totalborrowlimitfiat) === 0 ? ModalCannotBorrow : ModalBorrowForm()\n\n    return loading ? ModalLoading : \n                borrowCompleted ? TxnSuccessMsg :\n                    borrowFailed ? TxnErrorMsg : ModalRendered\n}\n","import React, { useContext, useState } from 'react'\nimport { Modal, Tab, Nav } from 'react-bootstrap'\nimport classNames from 'classnames'\nimport { useTranslation } from 'react-i18next'\nimport { BigNumber } from 'bignumber.js'\nimport CoreMethod from '../../methods/CoreMethod'\nimport CoreData from '../../methods/CoreData'\nimport FetchData from '../../methods/FetchData'\nimport { sleep } from '../../utils/promise'\nimport { TwinLogo } from '../../components/littleComponents'\nimport { NetworkTypeContext, WalletAddressContext, Web3Context } from '../../context'\nimport { ModalHeader } from '../../components/littleComponents'\nimport { DepositModal } from '../../components/subComponents/DepositModalV2/DepositModal'\nimport { BorrowModal } from '../../components/subComponents/BorrowModalV2/BorrowModal'\n\nfunction MarketModal(props) {\n    const { connectedAddress } = useContext(WalletAddressContext)\n    const { networkType } = useContext(NetworkTypeContext)\n    const { web3 } = useContext(Web3Context)\n    const { t, i18n } = useTranslation()\n    const [tabKey, setTabKey] =  useState('deposit')\n\n    const handleClose = () => {\n        setTabKey('deposit')\n        props.onHide()\n    }\n\n    // render UI\n    return(\n        <Modal\n            {...props}\n            aria-labelledby=\"contained-modal-title-vcenter\"\n            className=\"customModal\"\n            centered\n            >\n            <Modal.Header closeButton>\n                <ModalHeader \n                    data={props.data}\n                />\n            </Modal.Header>\n            <Modal.Body>\n\n                <Tab.Container id=\"supply-borrow\" defaultActiveKey={tabKey} onSelect={(key) => {\n                    setTabKey(key)\n                }}>\n                    <Nav variant=\"pills\" className=\"flex-row\">\n                        <Nav.Item>\n                            <Nav.Link eventKey=\"deposit\">{t('Banking.Markets.Deposit')}</Nav.Link>\n                        </Nav.Item>\n                        <Nav.Item>\n                            <Nav.Link eventKey=\"borrow\">{t('Banking.Markets.Borrow')}</Nav.Link>\n                        </Nav.Item>\n                    </Nav>\n                    <Tab.Content>\n                        <Tab.Pane eventKey=\"deposit\">\n                            {\n                                tabKey === 'deposit' && \n                                <DepositModal \n                                    data={props.data}\n                                    handleClose={handleClose}\n                                />\n                            }\n                        </Tab.Pane>\n                        <Tab.Pane eventKey=\"borrow\">\n                            {\n                                tabKey === 'borrow' && \n                                <BorrowModal \n                                    data={props.data}\n                                    totalborrowlimitfiat={props.totalborrowlimitfiat}\n                                    totalloanbalance={props.totalloanbalance}\n                                    handleClose={handleClose}\n                                />\n                            }\n                        </Tab.Pane>\n                    </Tab.Content>\n                </Tab.Container>\n            </Modal.Body>\n        </Modal>\n    )\n}\n\nexport default MarketModal","import React, { useState, useContext, useEffect, useCallback } from 'react'\nimport { Table, Container, Row, Col, DropdownButton, Dropdown, Button, OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport { useTranslation } from 'react-i18next'\nimport classNames from 'classnames'\nimport { NavLink, Link, Outlet, useLocation, useHistory } from 'react-router-dom'\nimport ContentLoader from 'react-content-loader'\nimport Web3 from \"web3\";\nimport { WalletAddressContext, WalletTypeContext, NetworkTypeContext } from '../../context'\nimport truncateMiddle from 'truncate-middle'\nimport Config from '../../utils/config';\nimport { createMetamaskWeb3Provider } from '../../methods/Wallet';\nimport FetchData from '../../methods/FetchData'\nimport CoreData from '../../methods/CoreData'\nimport { TwinLogo, TorTooltip } from '../../components/littleComponents'\nimport {loadingColors} from '../../utils/color'\nimport MarketModal from '../../components/modals/MarketModal'\nimport styles from './marketTable.module.scss'\nimport BigNumber from 'bignumber.js'\n\nfunction MarketTable(props) {\n  const history = useHistory();\n    const { connectedAddress } = useContext(WalletAddressContext)\n    const { networkType } = useContext(NetworkTypeContext)\n    const { t, i18n } = useTranslation();\n    const { pathname } = useLocation()\n    const [modalMarketIndex, setModalMarketIndex] = useState(0)\n    const [curList, setCurList] = useState([])\n    const [filterList, setFilterList] = useState([])\n    const [sortField, setSortField] = useState('')\n    const [sortDirection, setSortDirection] = useState('default')\n    const [tabIndex, setTabIndex] = useState(0)\n    const [marketModalShow, setMarketModalShow] = useState(false)\n    const [showDepositModal, setShowDepositModal] = useState(false)\n    const [showBorrowModal, setShowBorrowModal] = useState(false)\n\n    let loading = networkType === \"unsupported\" ? false : (props.data.loading === undefined ? true\n                  : connectedAddress === undefined ? true\n                  : props.data.loading)\n\n  const isBankingPage = props.inSafe ? true : pathname.includes('crypto-bank');\n\n    useEffect(() => {\n      filterResult(props.data, '')\n    }, [props.data])\n\n\n    const sortData = (data = props.data, field, direction) => {\n      let list = [...data]\n      if (direction !== 'default') {\n        const compare = (a, b) => direction === 'down' ? b - a : a - b\n        list.sort((a, b) => {\n          switch (field) {\n            case 'asset': {\n              const aItem = (a.name).toUpperCase()\n              const bItem = (b.name).toUpperCase()\n              const up = (s1, s2) => s1 === s2 ? 0 : s1 < s2 ? -1 : 1\n              return direction === 'down' ? -up(aItem, bItem) : up(aItem, bItem)\n            }\n            case 'saving': {\n              const aItem = +BigNumber(a.savingsAPY).plus(a.isLPToken ? a.lpTotalAPY : a.savingsMintAPY)\n              const bItem = +BigNumber(b.savingsAPY).plus(b.isLPToken ? b.lpTotalAPY : b.savingsMintAPY)\n              return compare(aItem, bItem)\n            }\n            case 'borrow': {\n              const aItem = +BigNumber(a.loanAPY).minus(a.loanMintAPY)\n              const bItem = +BigNumber(b.loanAPY).minus(b.loanMintAPY)\n              return compare(aItem, bItem)\n            }\n            case 'savingRewards': {\n              const aItem = parseFloat(a.supplyMonthlyRewards)\n              const bItem = parseFloat(b.supplyMonthlyRewards)\n              return compare(aItem, bItem)\n            }\n            case 'borrowRewards': {\n              const aItem = parseFloat(a.borrowMonthlyRewards) \n              const bItem = parseFloat(b.borrowMonthlyRewards) \n              return compare(aItem, bItem)\n            }\n            case 'liquidity': {\n              const aItem = props.curCurrenry === 0 ? a.liquidityFormatted : a.liquidityFiat\n              const bItem = props.curCurrenry === 0 ? b.liquidityFormatted : b.liquidityFiat\n              return compare(aItem, bItem)\n            }\n            case 'totalBorrow': {\n              const aItem = props.curCurrenry === 0 ? a.totalBorrowedFormatted : a.totalBorrowedFiat\n              const bItem = props.curCurrenry === 0 ? b.totalBorrowedFormatted : b.totalBorrowedFiat\n              return compare(aItem, bItem)\n              break;\n            }\n            case 'totalSupply': {\n              const aItem = props.curCurrenry === 0 ? a.totalSupplyFormatted : a.totalSupplyFiat\n              const bItem = props.curCurrenry === 0 ? b.totalSupplyFormatted : b.totalSupplyFiat\n              return compare(aItem, bItem)\n              break;\n            }\n            case 'utilRate': {\n              const aItem = a.utilRate\n              const bItem = b.utilRate\n              return compare(aItem, bItem)\n              break;\n            }\n          }\n        })\n      }\n  \n      for (let [key, value] of Object.entries(data)) {\n        if (isNaN(parseInt(key))) {\n          list[key] = value\n        }\n      }\n  \n      return list;\n    }\n\n\n    // 点击箭头排序\n    const sortHandler = (field) => {\n      let direction = 'default'\n      if (!sortField || sortField !== field) {\n        direction = 'down'\n      } else {\n        const arr = ['down', 'up', 'default']\n        let index = arr.findIndex(i => i === sortDirection)\n        index = (index + 1) % arr.length\n        direction = arr[index]\n      }\n\n      const sortList = sortData(filterList, field, direction)\n\n      setCurListData(tabIndex, sortList)\n      setSortField(field)\n      setSortDirection(direction)\n    }\n  \n\n    const setCurListData = (index, list = props.data) => {\n      switch (index) {\n        case 0:\n          setCurList(list)\n          break;\n        case 1: {\n          let newList = list.filter(item => !item?.isLPToken)\n          for (let [key, value] of Object.entries(list)) {\n            if (isNaN(parseInt(key))) {\n              newList[key] = value\n            }\n          }\n          setCurList(newList)\n        }\n          break;\n        case 2: {\n          let newList = list.filter(item => item?.isLPToken)\n          for (let [key, value] of Object.entries(list)) {\n            if (isNaN(parseInt(key))) {\n              newList[key] = value\n            }\n          }\n          setCurList(newList)\n        }\n          break;\n        default:\n          setCurList(list)\n      }\n    }\n\n  // tab切换\n  const handleSwitchTab = (index) => {\n    const sortList = sortData(props.data, sortField, sortDirection)\n    setTabIndex(index)\n    setCurListData(index, sortList)\n  }\n\n  // 筛选结果列表，会定时触发，只允许全部筛选\n  const filterResult = (list, inputValue) => {\n    const newList = inputValue !== '' ? list : props.data\n    const sortList = sortData(newList, sortField, sortDirection)\n\n    if (inputValue !== '') {\n      setTabIndex(0)\n      setCurListData(0, sortList)\n    } else {\n      setCurListData(tabIndex, sortList)\n    }\n\n    setFilterList(newList)\n  }\n\n    const tabList = [\n      {id: 0, title: t('Banking.Markets.AllAsset')},\n      {id: 1, title: t('Banking.Markets.SingleAsset')},\n      // {id: 2, title: `${CoreData.getLPSwapName(networkType)} LP`}\n    ]\n\n    const switchNetWorkHandler = async (item) => {\n      if (networkType.toUpperCase() === item.chain) {\n        // same chain\n        return;\n      }\n      const { chainId, rpcUrls, chainName, blockExplorerUrls, nativeCurrency } = item;\n      const ethereum = await createMetamaskWeb3Provider()\n      if (typeof ethereum !== 'undefined') {\n        try {\n          await ethereum.request({\n            method: 'wallet_switchEthereumChain',\n            params: [{ chainId: Web3.utils.toHex(chainId) }],\n          });\n          window.location.reload();\n        } catch (switchError) {\n          if (switchError.code === 4902) {\n            try {\n              await ethereum.request({\n                method: 'wallet_addEthereumChain',\n                params: [{ chainId: Web3.utils.toHex(chainId), rpcUrls, chainName, blockExplorerUrls, nativeCurrency }],\n              });\n            } catch (addError) {\n              console.log(addError)\n            }\n          } else {\n            console.log(switchError)\n          }\n        }\n      } else {\n        console.log('MetaMask is not installed, please install it first')\n      }\n    }\n\n    // render UI\n    const marketsLoading =\n    <tr className={styles.loading}>\n      <td colSpan={isBankingPage ? 9 : 8}>\n        <ContentLoader\n          height={150}\n          width={\"100%\"}\n          speed={1}\n          backgroundColor={loadingColors.background}\n          foregroundColor={loadingColors.foreground}\n        >\n          <rect x=\"0\" y=\"20\" rx=\"0\" ry=\"0\" width=\"100%\" height=\"30\" />\n          <rect x=\"0\" y=\"70\" rx=\"0\" ry=\"0\" width=\"100%\" height=\"30\" />\n          <rect x=\"0\" y=\"120\" rx=\"0\" ry=\"0\" width=\"100%\" height=\"30\" />\n        </ContentLoader>\n      </td>\n    </tr>\n\n  const handleClickDetail = (e, symbol) => {\n    e.stopPropagation();\n    history.push(\"/\" + i18n.language + \"/markets/\" + symbol);\n  };\n\n  const marketsList =  () => {\n    return curList?.length > 0 ? curList.map((market, i) => {\n      return market.symbol && (\n        <tr \n          key={market.symbol} \n          className={classNames(styles.marketRow)} \n          onClick={(e) => handleClickDetail(e, market.symbol)}        \n        >\n          <td>\n              <div className={styles.asset}>\n                {\n                  !market.isLPToken ?\n                  <img\n                    src={market.logo}\n                    width=\"auto\"\n                    height=\"24\"\n                    className=\"d-inline-block align-top\"\n                    alt=\"Logo\"\n                  /> : \n                  <TwinLogo\n                    mode={2}\n                    logo1={market.logo1}\n                    logo2={market.logo2} \n                  />\n                }\n                  <div className={styles.name}>{market.name}</div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {FetchData.getCurrencyFormatted(market.totalSupplyFiat)}\n                  </div>\n                  <div className={styles.dataSecondary}>\n                    {parseFloat(market.totalSupplyFormatted).toFixed(2) + ' ' + (market.uiSymbol || market.symbol)}\n                  </div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {(parseFloat(market.savingsAPY) + parseFloat(market.isLPToken ? market.lpTotalAPY : market.savingsMintAPY)).toFixed(2) + '%'}\n                  </div>\n                  <div className={styles.dataSecondary}>\n                    {parseFloat(market.savingsAPY).toFixed(2) + '%'} + {parseFloat(market.isLPToken ? market.lpTotalAPY : market.savingsMintAPY).toFixed(2) + '%'}\n                  </div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {FetchData.getCurrencyFormatted(market.totalBorrowedFiat)}\n                  </div>\n                  <div className={styles.dataSecondary}>\n                    {parseFloat(market.totalBorrowedFormatted).toFixed(2) + ' ' + (market.uiSymbol || market.symbol)}\n                  </div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {(parseFloat(market.loanAPY) - parseFloat(market.loanMintAPY)).toFixed(2) + '%'}\n                  </div>\n                  <div className={styles.dataSecondary}>\n                    {parseFloat(market.loanAPY).toFixed(2) + '%'} - {parseFloat(market.loanMintAPY).toFixed(2) + '%'}\n                  </div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {parseFloat(market.utilRate) < 1e-10 ? '-' : parseFloat(market.utilRate).toFixed(2) + '%'}\n                  </div>\n              </div>\n          </td>\n          {/* <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {parseFloat(market.supplyMonthlyRewards).toFixed(2)}\n                  </div>\n              </div>\n          </td>\n          <td>\n              <div className={styles.dataContainer}>\n                  <div className={styles.dataPrimary}>\n                    {parseFloat(market.borrowMonthlyRewards).toFixed(2)}\n                  </div>\n              </div>\n          </td> */}\n          {\n            isBankingPage && (\n              <td \n                className={!connectedAddress ? styles.actionsTd : ''}\n                onClick={(e) => {\n                  e.stopPropagation()\n                  if (connectedAddress) {\n                    setModalMarketIndex(i)\n                    setMarketModalShow(true)\n                  }\n                }}\n              >\n                <div className={styles.dataContainer}>\n                  <Button\n                    variant=\"outline-green\"\n                    size=\"sm\"\n                    disabled={!connectedAddress}>\n                    {`${t('Banking.Markets.Deposit')} & ${t('Banking.Markets.Borrow')}`}\n                  </Button>\n                </div>\n              </td>\n            )\n          }\n        </tr>\n      )\n    }) : <tr className={styles.noData}><td colSpan={isBankingPage ? 9 : 8}>{t('Common.NoData')}</td></tr>\n  }\n\n  const renderChain = () => {\n    const { network } = Config.headerConfigData;\n    let result = []\n    for (let [key, value] of Object.entries(network)) {\n      result.push((\n        <Dropdown.Item href=\"#\" key={key} onClick={() => switchNetWorkHandler(value)}>{value?.chain}</Dropdown.Item>\n      ))\n    }\n    return connectedAddress && connectedAddress.toLowerCase() !== '0x0000000000000000000000000000000000000000' && (\n        <DropdownButton variant=\"green\" className={styles.switchChain} id=\"dropdown-basic-button\" title={Config.headerConfigData?.network[networkType]?.chain}>\n          {result}\n        </DropdownButton>\n    )\n  }\n\n  return (\n    <div className={styles.marketWrap}>\n      <h2 className={styles.marketTitle}>{t('Banking.Markets.Title')}</h2>\n\n      <Row className={styles.marketTotal}>\n        <Col sm=\"12\" md=\"6\">\n          <div className={styles.totalSize}>\n            <dl>\n              <dt>{t('Banking.Markets.TotalMarketSize')}</dt>\n              <dd>\n                <span className={styles.num}>${props.data?.totalBizSize || 0}</span>\n                {/* <span className={classNames(styles.percentNum, styles.add)}>+6.29%</span> */}\n              </dd>\n            </dl>\n          </div>\n        </Col>\n        <Col sm=\"12\" md=\"6\">\n          <div className={styles.totalSupplyBorrow}>\n            <dl>\n              <dt>{t('Banking.Markets.TotalAllSupply')}</dt>\n              <dd>\n                <span className={styles.num}>${props.data.totalTVLFiat || 0}</span>\n                {/* <span className={classNames(styles.percentNum, styles.add)}>+6.29%</span> */}\n              </dd>\n            </dl>\n            <dl>\n              <dt>{t('Banking.Markets.TotalAllBorrow')}</dt>\n              <dd>\n                <span className={styles.num}>${props.data.totalBorrow || 0}</span>\n                {/* <span className={classNames(styles.percentNum, styles.sub)}>+6.29%</span> */}\n              </dd>\n            </dl>\n          </div>\n        </Col>\n      </Row>\n      <div className={styles.marketTable}>\n        <Row>\n            <Col md={6} className={styles.tabMenuContainer}>\n                {/* {renderChain()} */}\n                <div className={styles.btnGroup}>\n                  {\n                    tabList.map((item) => (\n                      <Button \n                        key={item.id}\n                        variant=\"transparent\" \n                        className={classNames(styles.tabMenuItem, {[styles.active]: tabIndex === item.id})} \n                        onClick={() => handleSwitchTab(item.id)}\n                      >\n                        {item.title}\n                      </Button>\n                    ))\n                  }\n                </div>\n            </Col>\n            {/* <Col md={6} className={styles.totalMarketData}>\n                <div className={styles.label}>\n                  {t('Markets.BizSize')}\n                </div>\n                <div className={styles.value}>\n                  <OverlayTrigger \n                    overlay={\n                      <Tooltip className={classNames(\"tor-tooltip\", styles.toolTipList)}>\n                        <div className={styles.toolTipItem}>\n                          <span className={styles.hd}>{t('Markets.TotalBorrow')}</span>\n                          <span className={styles.bd}>${props.data.totalTVLFiat || 0}</span>\n                        </div>\n                        <div className={styles.toolTipItem}>\n                          <span className={styles.hd}>{t('Markets.TotalSupply')}</span>\n                          <span className={styles.bd}>${props.data.totalBorrow || 0}</span>\n                        </div>\n                      </Tooltip>\n                    }\n                  >\n                    <div>\n                      ${props.data?.totalBizSize || 0}\n                    </div>\n                  </OverlayTrigger>\n                </div>\n            </Col> */}\n        </Row>\n        <div className={styles.marketTableContainer}>\n            <Table responsive className={styles.tableContainer}>\n                <thead>\n                    <tr>\n                        <th onClick={() => sortHandler('asset')}>\n                        <span className={classNames(styles.titleTxt, {\n                          [styles.up]: sortField === 'asset' && sortDirection === 'up',\n                          [styles.down]: sortField === 'asset' && sortDirection === 'down'\n                        })}>\n                          {t('Banking.Markets.Assets')}\n                        </span>\n                        </th>\n                        <th onClick={() => sortHandler('totalSupply')}>\n                        <span className={classNames(styles.titleTxt, {\n                          [styles.up]: sortField === 'totalSupply' && sortDirection === 'up',\n                          [styles.down]: sortField === 'totalSupply' && sortDirection === 'down'\n                        })}>\n                          {t('Banking.Markets.TotalSupply')}\n                        </span>\n                        </th>\n                        <th onClick={() => sortHandler('saving')}>\n                            <span className={classNames(styles.titleTxt, {\n                              [styles.up]: sortField === 'saving' && sortDirection === 'up',\n                              [styles.down]: sortField === 'saving' && sortDirection === 'down'\n                            })}>\n                              <TorTooltip\n                                type=\"line\"\n                                title={t('Banking.Markets.SupplyAPY')}\n                                desc={t('Banking.Markets.SupplyAPY-info')}\n                              />\n                            </span>\n                        </th>\n                        <th onClick={() => sortHandler('totalBorrow')}>\n                          <span className={classNames(styles.titleTxt, {\n                            [styles.up]: sortField === 'totalBorrow' && sortDirection === 'up',\n                            [styles.down]: sortField === 'totalBorrow' && sortDirection === 'down'\n                          })}>\n                            {t('Banking.Markets.TotalBorrow')}\n                          </span>\n                        </th>\n                        <th onClick={() => sortHandler('borrow')}>\n                          <span className={classNames(styles.titleTxt, {\n                            [styles.up]: sortField === 'borrow' && sortDirection === 'up',\n                            [styles.down]: sortField === 'borrow' && sortDirection === 'down'\n                          })}>\n                            <TorTooltip\n                              type=\"line\"\n                              title={t('Banking.Markets.BorrowAPY')}\n                              desc={t('Banking.Markets.BorrowAPY-info')}\n                            />\n                          </span>\n                        </th>\n                        <th onClick={() => sortHandler('utilRate')}>\n                          <span className={classNames(styles.titleTxt, {\n                            [styles.up]: sortField === 'utilRate' && sortDirection === 'up',\n                            [styles.down]: sortField === 'utilRate' && sortDirection === 'down'\n                          })}>\n                            {t('Banking.Markets.UtilRate')}\n                          </span>\n                        </th>\n                        {/* <th onClick={() => sortHandler('savingRewards')}>\n                          <span className={classNames(styles.titleTxt, {\n                            [styles.up]: sortField === 'savingRewards' && sortDirection === 'up',\n                            [styles.down]: sortField === 'savingRewards' && sortDirection === 'down'\n                          })}>\n                            <TorTooltip\n                              type=\"line\"\n                              title={t('Banking.Markets.SupplyRewards')}\n                              desc={t('Banking.Markets.SupplyRewards-info')}\n                            />\n                          </span>\n                        </th>\n                        <th onClick={() => sortHandler('borrowRewards')}>\n                          <span className={classNames(styles.titleTxt, {\n                            [styles.up]: sortField === 'borrowRewards' && sortDirection === 'up',\n                            [styles.down]: sortField === 'borrowRewards' && sortDirection === 'down'\n                          })}>\n                            <TorTooltip\n                              type=\"line\"\n                              title={t('Banking.Markets.BorrowRewards')}\n                              desc={t('Banking.Markets.BorrowRewards-info')}\n                            />\n                          </span>\n                        </th> */}\n                        {\n                          isBankingPage && (\n                            <th className={styles.actions}>{t('Banking.Actions')}</th>\n                          )\n                        }\n                    </tr>\n                </thead>\n                <tbody>\n                  {loading ? marketsLoading : marketsList()}\n                </tbody>\n            </Table>\n        </div>\n      </div>    \n      {\n        curList.length > 0  &&\n        <MarketModal \n            show={marketModalShow}\n            onHide={() => setMarketModalShow(false)}\n            data={curList[modalMarketIndex]}\n            totalborrowlimitfiat={curList.totalBorrowLimitFiat}\n            totalloanbalance={curList.totalLoanBalance}\n        />\n      }\n    </div>\n  )\n}\n\nexport default MarketTable"],"sourceRoot":""}